<!DOCTYPE html>
<html>
  <head>
    <title>MT-RTT</title>
    <script src="https://unpkg.com/jspsych@7.3.4"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-fullscreen@1.2.1"></script>
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.3"></script>
	<script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.2.0"></script>
    <script src="https://unpkg.com/@jspsych/extension-mouse-tracking@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-instructions@1.1.4"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.3"></script>
    <script src="plugins/plugin-survey-slider.js"></script>
    <script src="plugins/plugin-survey-multiple-slider.js"></script>
    <script src="https://unpkg.com/@jspsych-contrib/plugin-survey-slider@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-html-form@1.0.3"></script>
   <script  src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
   <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.3"></script>
   <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe@0.4.0"></script>
    <link href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css" rel="stylesheet" type="text/css" />
   

<style>
    #bottom-bar {
    position: fixed;
    bottom: 0px;
    left: 0px;
    height: 5%;
    width: 100%;
    background-color: lightblue;
    text-align: center;
    padding: 10px 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 0;
  }

  #jspsych-survey-html-form-next {
    font-weight: bold
  }

  .jspsych-html-slider-response-container {
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction: column;
    line-height: 1.3em !important;
}


.jspsych-multiple-slider-form {
    position:fixed
}

#jspsych-html-slider-response-wrapper {
    margin-top:5% !important
}

  .jspsych-content-wrapper.with-bottom-bar {
  padding-bottom: 5%;
}

.jspsych-content-wrapper.with-bottom-bar-and-button {
  padding-bottom: 5%;
  z-index: 0;
}

.jspsych-survey-html-form-preamble {
    margin-top: 5%
}

.jspsych-btn {
    position: fixed;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%); 
    padding: 0px;
    margin-bottom: 15px;
    z-index:9999;
    align-items: center;
    justify-content: center;
    width: 120px; 
    height: 30px;
}

.jspsych-btn-2 {
    position: fixed;
    left: 50%;
    bottom: 15%;
    transform: translateX(-50%); 
    padding: 0px;
    margin-bottom: 15px;
    z-index:9999;
    align-items: center;
    justify-content: center;
    width: 120px; 
    height: 30px;
}

#jspsych-multiple-slider-next {
    position: fixed;
    left: 50%;
    bottom: -24%;
    transform: translateX(-50%); 
    padding: 0px;
    margin-bottom: 15px;
    z-index: 9999;
    align-items: center;
    justify-content: center;
    width: 120px; 
    height: 30px;
    font-weight: bold
}    


#jspsych-multiple-slider-form {
    z-index: 9999;
    width:80%;
}


#btn-consent {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    padding: 0px;
    margin-bottom: 15px;
    z-index:9999;
    align-items: center;
    justify-content: center;

}

#jspsych-fullscreen-btn {
    position: fixed;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%); 
    padding: 0px;
    margin-bottom: 15px;
    z-index:9999;
    align-items: center;
    justify-content: center;
    width: 120px; 
    height: 30px;
}

.jspsych-content-wrapper {
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    z-index: 1;
  }




  .top-buttons .jspsych-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 0
  }

  /* .top-buttons .jspsych-html-button-response-button-group {
    display: flex;
    gap: 200px; 
    margin-top: 20px;
  } */

  .top-buttons {
    font-size: 20px;
    padding: 0px 0px;
    z-index: 1;
    width: 300px;
    height: 110px;
  }

  #jspsych-survey-likert-next {
    font-weight: bold;
  }


  #jspsych-survey-likert-next1 {
    position: fixed;
    left: 50%;
    bottom: -24%;
    transform: translateX(-50%); 
    padding: 0px;
    margin-bottom: 15px;
    z-index: 9999;
    align-items: center;
    justify-content: center;
    width: 120px; 
    height: 30px;
    font-weight: bold
  }


</style>

  </head>
  <!-- <body>
    body {
    margin: 0;
    padding: 0;
  }
</body> -->

  
  <script>


    var jsPsych = initJsPsych({
      extensions: [
    {type: jsPsychExtensionMouseTracking, params: {minimum_sample_time: 0}}
  ]
    });

    var timeline = [];

    var fulfill = 0

    var consent = {
  type: jsPsychHtmlButtonResponse,
  stimulus: `
    <div style="font-size: 10px;">
      <h1 style="text-align: center; margin-top: 5%;">Online Relative Response Task Experiment</h1>
    </div>
    <div style="height: 500px; width:800px; overflow-y: auto; text-align: left; border: 1px solid #ccc; padding: 15px; font-size: 12px;">
        <img style="height:100px; width:100px; margin-left:45%" src=" https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fcdn.freelogovectors.net%2Fwp-content%2Fuploads%2F2021%2F04%2Funiversity-of-sussex-logo-freelogovectors.net_.png&f=1&nofb=1&ipt=11948eed166104748ed48b10c71cf4666ecb8c01e3f7a35044e9aec6b4322feb">
      <p>Welcome to the study. Thank you for considering taking part; you are asked to carefully read the information on this page, which you may return to at any point.
 <strong> Please make sure you are using a device with a mouse or trackpad </strong> - 
        some parts of the experiment cannot register inputs from a touchscreen, and this will result in unusable data.</p>
      <p><br><em>What is it for?</em></p>
      <p>The purpose of this research study is to further our understanding of our automatic comprehension and response to different types of sentences. 
        This study is being conducted by student researcher Syni Stamouli with project supervisor Dr. Dominique Makowski at the University of Sussex. 
        If you have any questions, the researchers may be contacted at (ss2651@sussex.ac.uk)</p>

         <p><br><em>What does participation involve?</em></p>
      <p><br>This study uses an online experiment lasting approximately 25-35 minutes in full, with a break point around 12 minutes. Please make sure you are in a place where you can focus and not be interrupted. 
        Firstly, you will be asked a few questions about yourself and complete a survey. Then, instructions will be given to complete tasks involving responding 
        to particular statements by pressing different buttons according to a given rule. These statements will either be to do with Brexit or immigration in the UK.
       
                 <p><br><em>What does participation involve?</em></p>

        <br>None of the statements presented will be of an abusive or extreme nature. However, given the topic matter, 
        they may nonetheless be distressing for some people. Please consult <a href="https://www.nhs.uk/mental-health/feelings-symptoms-behaviours/feelings-and-symptoms/stress/" target="_blank">this NHS webpage for resources to deal with distress</a>.
         This will also be presented midway and at the end. After completing the experiment, you will be given a link to a separate form to submit your email for the prize draw of a Â£25 retail voucher.
        <br>

                <p><br><em>What will happen to the results and the data?</em></p>
        
        <p><br>The results of this research will be included in a Master's dissertation, which we anticipate being  available from 01/09/25 (ss2651@sussex.ac.uk). In accordance with the principles of open science, the raw data will be publicly available. 
Please read this information carefully and then, if you wish to take part, please check the box below to show you have fully understood, and that you consent to take part in the study as it  is described. If you have any other questions about the experiment, 
you may send these to ss2651@sussex.ac.uk.<br>

Your participation in this study is completely voluntary and confidential; you may withdraw at any time.
Information from the prize draw form is entered and kept on a system entirely separate from the experimental data and is thus not connected to it. During the experiment, you will be given a random unique ID which you may make a note of. If at any point you change your mind about participating, until 25/08/2025 you may request that the data associated with this ID be deleted. 
You will be alerted when your data is saved; leaving the experiment before this point will be treated as a reversal of your decision to participate and your data will not be included in the final analysis
After the save point, you will be reminded of your user ID and the details of how to withdraw your data if you wish to do so.</p>
        
        <br>No identifying information will be collected in the experiment, meaning your answers will be anonymous and not traceable to you. 
        Information from the prize draw form is entered and kept on a system entirely separate from the experimental data and is thus
        not connected to it. During the experiment, you will be given a random unique ID which you may make a note of. If after the experiment 
        you change your mind about participating, at any point until 21/08/2025 you may request that the data associated with this ID be 
        deleted. You may also leave the experiment before the save point if you wish to reverse your decision to participate, in which case your data 
        will not be included in the final analysis and will be deleted. After the save point, information will be provided with details of how to
        withdraw your data if you wish to do so.</p>

        <p><br><em>Who can take part?</em></p>
        <p> To take part, you must be at least 18 years of age, speak English fluently, and either be British by nationality or currently reside in the UK (and have spent more than 12 months in the UK in total). You must be using
            a mouse or trackpad, and not a touchscreen, to input your answers. If you are currently using a touchscreen, please connect a
            mouse or switch to a different device. </p>

          <p><br>If you do not wish to complete this survey, simply close your browser. 
Your responses are only connected to information you provide within the experiment, and IP addresses will not be collected to ensure anonymity. Sensitive information, such as ethnicity, is voluntary to disclose and does not affect your participation in the experiment. You will not be asked for your name or location.
This project has been reviewed and approved by the University of Sussex. Questions concerning your rights as a participant in this research may be directed to ss2651@sussex.ac.uk.</p>

<p><br>Before you continue, ensure that you have understood the following:
        <ul><p><li><em>I understand that by checking the boxes to continue I am agreeing to take part in the University of Sussex research described here, and that I have read and understood this information sheet.</li></p>
      <p><li>I understand that my participation is entirely voluntary, that I can choose not to participate in part or all of the study, and that I can withdraw at any stage without having to give a reason and without being penalised in any way (e.g., if I am a student, my decision whether or not to take part will not affect my grades)
</li></p>
<p><li>I understand that my personal data will be used for the purposes of this research study and will be handled in accordance with Data Protection legislation. I understand that the Universityâs  <a href="https://www.sussex.ac.uk/about/website/privacy-and-cookies/privacy" target="_blank">Privacy Notice</a> provides further information on how the University uses personal data in its research.</li></p>
      <p><li>I understand I can request without penalty that my data be withdrawn and deleted even after the data collection is complete, any time up until the results are analysed (25/08/25).</em></li></p></ul>


        <p>For further information about this research and your rights as a participant please contact Syni Stamouli via ss2651@sussex.ac.uk. This research has been approved (ER/SS2651/1) by the School of Psychology. If you have any ethical concerns, please contact the project supervisor Dr. Dominique Makowski (D.makowski@sussex.ac.uk). The University of Sussex has insurance in place to cover its legal liabilities in respect of this study.</p>
    </div> <div style="display: flex; justify-content: space-around;flex-wrap:wrap">
     <div style="width:400px; text-align: left; margin-top: 10px; font-size: 12px;">
      <label><input type="checkbox" id="18-checkbox">I am over the age of 18</label><br>
      <label><input type="checkbox" id="touchscreen-checkbox"> I am not using a touchscreen to interact with this page</label><br>
    <label><input type="checkbox" id="english-checkbox"> I speak English fluently</label>

    </div>
    <div style="width:500px; text-align: left; margin-top: 10px; font-size: 12px;">
      <label><input type="checkbox" id="UK-checkbox">I am either British by nationality or currently reside in the UK</label><br>
            <label><input type="checkbox" id="voluntary">I understand my participation is voluntary and I may withdraw at any time</label><br>
      <label><input type="checkbox" id="consent-checkbox"> I have read and understood the above and consent to taking part</label>
    </div> </div>
  `,
  choices: ["I consent"],
  button_html: '<button id="btn-consent" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>I consent</strong></button>',
  on_load: function () {
  const Iconsentbutton = document.querySelector('.jspsych-btn');
    const consentcheckbox = document.getElementById('consent-checkbox');
    const agecheckbox = document.getElementById('18-checkbox');
    const englishcheckbox = document.getElementById('english-checkbox');
    const UKcheckbox = document.getElementById('UK-checkbox');
    const touchscreencheckbox = document.getElementById('touchscreen-checkbox');
    Iconsentbutton.disabled = true;
    function updateConsentState() {
      const consentchecked = consentcheckbox.checked;
      const agechecked = agecheckbox.checked;
      const englishchecked = englishcheckbox.checked;
      const UKchecked = UKcheckbox.checked;
      const touchscreenchecked = touchscreencheckbox.checked;
      Iconsentbutton.disabled = !(consentchecked && agechecked && englishchecked && UKchecked && touchscreenchecked);
    }
    consentcheckbox.addEventListener('change', updateConsentState);
    agecheckbox.addEventListener('change', updateConsentState);
    englishcheckbox.addEventListener('change',updateConsentState);
    UKcheckbox.addEventListener('change',updateConsentState);
    touchscreencheckbox.addEventListener('change',updateConsentState)
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
  on_finish: function() {
    document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
    let bar = document.getElementById('bottom-bar');
    document.body.removeChild(bar);  
  },
  on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
},
data: { screen: "consent" }
};




timeline.push(consent);


var jspsych_id = ""
var block2code = ""
var theme = ""
var condition1 = ""
var condition2 = ""
var rule1 = ""
var rule2 = ""
var code = ""
var valid = 0
var block2only = 0
var clickcount = 0
var contbutton;
var ID = ''


const now = new Date();
const pad = (n) => n.toString().padStart(2, '0');

const formatted_date = `${pad(now.getDate())}-${pad(now.getMonth() + 1)}--${pad(now.getHours())}--${pad(now.getMinutes())}`;


var xcord = 0;
var ycord = 0;
var calibrationarray = [];
var cal = ''
var clickwhere;

function recordmouse(event){
    xcord = event.clientX;
    ycord = event.clientY;
    calibrationarray.push({x:xcord, y:ycord});
    clickcount++;
    }

var calstim  = function(){
    const clickwhere = document.getElementById('clickwhere')
    if (clickcount===1) {clickwhere.innerHTML = 'Please press:<br>the <strong>bottom left</strong> corner of the <strong>left</strong> button<br>as close to the edge as you can'}
    else if (clickcount===2) {clickwhere.innerHTML = 'Please press:<br>the <strong>top left</strong> corner of the <strong>left</strong> button<br>as close to the edge as you can'}
    else if (clickcount===3) {clickwhere.innerHTML = 'Please press:<br>the <strong>top right</strong> corner of the <strong>left</strong> button<br>as close to the edge as you can'}
    else if (clickcount===4) {clickwhere.innerHTML = 'Please press:<br>the <strong>bottom right</strong> corner of the <strong>left</strong> button<br>as close to the edge as you can'}
    else if (clickcount===5) {clickwhere.innerHTML = 'Please press:<br>the <strong>bottom left</strong> corner of the <strong>right</strong> button<br>as close to the edge as you can'}
    else if (clickcount===6) {clickwhere.innerHTML = 'Please press:<br>the <strong>top left</strong> corner of the <strong>right</strong> button<br>as close to the edge as you can'}
    else if (clickcount===7) {clickwhere.innerHTML = 'Please press:<br>the <strong>top right</strong> corner of the <strong>right</strong> button<br>as close to the edge as you can'}
    else if (clickcount===8) {clickwhere.innerHTML = 'Please press:<br>the <strong>bottom right</strong> corner of the <strong>right</strong> button<br>as close to the edge as you can'}
    else if (clickcount===9) {clickwhere.innerHTML = 'Please press:<br>the <strong>square button below</strong>, in the centre'}
    else if (clickcount===10) {clickwhere.innerHTML = 'Great! Please click once more to continue<br>'}
    else if (clickcount === 11){
        document.removeEventListener('click', recordmouse);
        document.removeEventListener('click', calstim);
        console.log(calibrationarray);
        jsPsych.finishTrial()}
}
    

var buttoncalibration = {
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){return `
    <div id="clickwhere"></div>
     <button id="dummy1" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:25%; top: 15%"></button>
     <button id="dummy1" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:75%; top: 15%"></button>
     <button class="jspsych-btn-2" style="width: 15px; height: 15px; background-color: white; border: 2px solid black; border-radius: 0px; padding: 0"></button>
    `},
    choices: [],
    button_html: '<button id="continue-btn" class="jspsych-btn" style="font-weight:bold" <strong>Continue</strong></button>',
    on_start: function(){
      document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
    },
    on_load: function(){
        const clickwhere = document.getElementById('clickwhere')
        clickwhere.innerHTML = 'Please press:<br>the <strong>square button below</strong>';
        document.addEventListener('click', recordmouse)
        document.addEventListener('click', calstim)
    },
    on_finish: function(data){
      document.removeEventListener('click', recordmouse)
      document.removeEventListener('click', calstim)
      data.calibration1=calibrationarray
    },
    data: {
      screen: "calibration",
      calibration: calibrationarray
    }
    };



var fullscreentrial = {
    type: jsPsychFullscreen,
        fullscreen_mode: true,
        message: `<div><p>When you press 'Continue', the window will become full-screen. <br><br>Please keep the window full-screen until you are advised to close it at the end of the experiment.</p>
            <p><strong>If you exit full-screen before being told it is okay to do so, the resultant data will be unusable</strong></p>`,
        button_label: `<strong>Continue</strong>`,
        on_load: function(){document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
        let bar = document.createElement('div');
             bar.id = 'bottom-bar';
             document.body.appendChild(bar)},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
             document.body.removeChild(bar);
}
};


        beforeqfun = function(){
    const participated = document.querySelector('input[name="participated"]:checked')?.value;
    if (participated === "Yes") {block2only = 1} 
    else if (participated ==="No") {block2only=0}
    else if (participated ==="Half") {block2only=3}
    if (document.querySelector('input[name="participated"]:checked')) {contbutton.disabled = false}
}

var block2code="";
var AorB="";

var beforequestion = {
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){
        return `<div style="position:fixed; top:20%; left:50%; transform:translateX(-50%);"><p><strong>Select which applies to you:</strong></p></div>
            <div style="display: flex; flex-direction:column;height: 20%; width:46%; text-align: left; border: 1px solid #ccc; padding: 15px; font-size: 16px; position:absolute; z-index:-1;top:26.5%;left:50%;transform: translateX(-50%);">
                <label style="margin-bottom:4%"><input type="radio" name="participated" value="No"> I have not completed any of the experiment before</label><br><label style="margin-bottom:4%"><input type="radio" name="participated" value="Yes"> I am returning from a break to finish a session</label><label><input type="radio" name="participated" value="Half"> I have already completed one full experiment, and now would like to participate again</label><br>
                </div>
        `
        },
    choices: ['<strong>Continue</strong>'],
    button_html: '<button id="continue-btn" class="jspsych-btn" style="font-weight:bold"<strong>Continue</strong></button>',
    on_load: function(){
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
        contbutton = document.getElementById('continue-btn');
        contbutton.disabled=true;
        let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
        document.addEventListener('click',beforeqfun)
    },
    on_finish: function(data){
        document.removeEventListener('click',beforeqfun );
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar);
        data.block2only=block2only;
        console.log('block2only is', block2only)
        if (block2only === 1) {
            jsPsych.timeline.insert(beenherebefore);
            jsPsych.timeline.insert(welcomeA);
            jsPsych.timeline.insert(fullscreentrial);
            jsPsych.timeline.insert(buttoncalibration);
            jsPsych.timeline.insert(welcome);
            }
        else if (block2only===0) {
            theme = jsPsych.randomization.sampleWithoutReplacement(["Brexit", "Immigration"],1)[0];
            data.theme=theme
            condition1 = jsPsych.randomization.sampleWithoutReplacement(["desc", "nondesc"],1)[0];jsPsych.data.addProperties({condition: condition1});
            jspsych_id = jsPsych.randomization.randomID(5).toUpperCase();
            data.jspsych_id=jspsych_id;
            if (condition1 === "desc") {condition2 = "nondesc"}
            else if (condition1 ==="nondesc") {condition2 = "desc"};
            rule1 = jsPsych.randomization.sampleWithoutReplacement(["true", "false"],1)[0];
            rule2=rule1
            data.rule1=rule1;
            data.rule2=rule2;
            code=theme[0]+condition2[0]+rule2[0];
            block2code=code.toUpperCase();
            data.block2code=block2code;
            console.log('theme:',theme,'<br>condition:',condition1,'<br>rule1:',rule1,'<br>condition2:',condition2,'<br>rule2:',rule2,'<br>code:',code,'<br>block2code:',block2code);
            jsPsych.timeline.insert(welcomeA);
            jsPsych.timeline.insert(fullscreentrial);
            jsPsych.timeline.insert(buttoncalibration);
            jsPsych.timeline.insert(welcome);
          }
        else if (block2only === 3){
            jsPsych.timeline.insert(halfbeenherebefore);
            jsPsych.timeline.insert(welcomeA);
            jsPsych.timeline.insert(fullscreentrial);
            jsPsych.timeline.insert(buttoncalibration);
            jsPsych.timeline.insert(welcome);
        };
}};
timeline.push(beforequestion);


  

var lasttheme = ""
var lastcon = ""

var getthemefun = function(){
  console.log("getthemefun ran");
  lasttheme = document.querySelector('input[name="lasttheme"]:checked')?.value;
  console.log('function says last theme is',lasttheme)
  if (lasttheme ==="BrexitTheme") {theme="Immigration"}
  else if (lasttheme==="ImmigrationTheme"){theme="Brexit"}};


  // var getlastconfun = function(){
  // console.log("getaorb ran");
  // lastcon = document.querySelector('input[name="lastcon"]:checked')?.value;
  // console.log('function says last con is',lastcon)}

var halfbeenherebefore = {
        type: jsPsychSurveyHtmlForm,
        preamble:`
            <div style="position:fixed; top:15%;left: 50%; transform: translateX(-50%); width:30%; margin: auto">
            <p>Thank you for returning!</p>
            <p>Please your participant ID and your previous theme (Immigration or Brexit) below.</p>`,
        html: `<div style="width: 30%; margin: auto; text-align: center; align-items: center; position:fixed; top:35%; left:50%;transform: translateX(-50%)">
  
  <p>Participant ID:</p>
  <div><input type="text" name="ID" maxlength="5" minlength="5" required style="width: 50%"></div>

  <p><br>Theme last session:</p>
        <label><input type="radio" name="lasttheme" value="BrexitTheme" required> Brexit</label><br>
        <label><input type="radio" name="lasttheme" value="ImmigrationTheme"> Immigration</label><br>
  </div>
            <div style="height: 55%; width:30%; text-align: left; border: 1px solid #ccc; padding: 15px; font-size: 14px; position:absolute; z-index:-1;top:21%;left:50%;transform: translateX(-50%);"></div>
`,
            data: { screen: "halfbeenherebefore" },
        button_html: '<button id="beenherebtn" class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
        on_start: function(){
            let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
        },
        on_load: function(){
          document.addEventListener('click',getthemefun);
          document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
        },
        on_finish: function(data){
          document.removeEventListener('click',getthemefun);
    jspsych_id = jsPsych.data.get().last(1).values()[0].response.ID.toUpperCase();
    data.jspsych_id = jspsych_id;
    lasttheme = document.querySelector('input[name="lasttheme"]:checked')?.value;
    if (lasttheme ==="BrexitTheme") {theme="Immigration"}
    else if (lasttheme==="ImmigrationTheme"){theme="Brexit"}
    data.theme=theme
    condition1 = jsPsych.randomization.sampleWithoutReplacement(["desc", "nondesc"],1)[0];
    data.condition1=condition1
    if (condition1 === "desc") {condition2 = "nondesc"}
    else if (condition1 ==="nondesc") {condition2 = "desc"};
    data.condition2=condition2;
    rule1 = jsPsych.randomization.sampleWithoutReplacement(["true", "false"],1)[0];
    data.rule1=rule1;
    rule2=rule1
    data.rule2=rule2;
            code=theme[0]+condition2[0]+rule2[0];
            block2code=code.toUpperCase();
            data.block2code=block2code
            block2only=0;
            console.log('theme:',theme,'<br>condition:',condition1,'<br>rule1:',rule1,'<br>condition2:',condition2,'<br>rule2:',rule2,'<br>code:',code,'<br>block2code:',block2code);
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar);
    }
};



var beenherebefore = {
        type: jsPsychSurveyHtmlForm,
        preamble:`
            <div style="position:fixed; top:20%;left: 50%; transform: translateX(-50%); margin: auto">
            <p>Thank you for returning!</p>
            <p>Please enter your participant ID and condition code (e.g. BNF) from before below.</p>`,
        button_label: "Continue",
        html: `<div style="width: 400px; margin: auto; text-align: center; align-items: center; position:fixed; top:35%; left:50%;transform: translateX(-50%)">
  
  <p>Participant ID:</p>
  <div style="width:400px; align-items: center"><input type="text" name="ID" maxlength="5" minlength="5" required style="width: 50%"></div>

  <p>Condition code:</p>
  <div style="width:400px; align-items: center"><input type="text" name="code" maxlength="3" minlength="3" required style="width: 50%"></div>
</div>`,
            data: { screen: "beenherebefore" },
        button_html: '<button id="beenhere-btn" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
        on_start: function(){
            let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
        },
        on_finish: function(data){
    jspsych_id = jsPsych.data.get().last(1).values()[0].response.ID.toUpperCase();
    data.jspsych_id = jspsych_id;
    block2code = jsPsych.data.get().last(1).values()[0].response.code.toUpperCase();
    data.block2code = block2code
    if (block2code[0] === "I") {theme = "Immigration"}
    else if (block2code[0] === "B"){theme = "Brexit"};
    if (block2code[1]==="D") {condition2 = "desc"} 
    else if (block2code[1]==="N") {condition2 = "nondesc"};
    if (block2code[2] ==="T") {rule2 = "true"} 
    else if (block2code[2] ==="F") {rule2 = "false"};
            console.log(theme,condition2,rule2,block2code);
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar);
    }
};

var SelectBrexitNondescStimuli = [];
var SelectBrexitDescStimuli = [];

var BrexitExplicitMeasures1_StimuliX = []
var BrexitExplicitMeasures2_StimuliX = []
var BrexitExplicitMeasures3_StimuliX = []
var BrexitExplicitMeasures4_StimuliX = []


var scale1 = ['<span style="font-size: 12px"><em>Strongly Disagree</em></span>', '<span style="font-size: 12px"><em>Strongly Agree</em></span>']
var scale7 = ['<span style="font-size: 12px"><em>Very bad</em></span>', '<span style="font-size: 12px"><em>Very good</em></span>']



var AllBrexitDescStimuli = [
{stimulus: 'The UK has left the EU', name: 'BD1'},
{stimulus: 'The UK has exited the EU', name: 'BD2'},
{stimulus: 'The UK has withdrawn from the EU', name: 'BD3'},
{stimulus: 'The UK has pulled out of the EU', name: 'BD4'},
{stimulus: 'The UK is out of the EU', name: 'BD5'},
{stimulus: 'The UK hasnât remained in the EU', name: 'BD6'},
{stimulus: 'The UK hasnât stayed in the EU', name: 'BD7'},
{stimulus: 'The UK hasnât kept being in the EU', name: 'BD8'},
{stimulus: 'The UK isnât part of the EU', name: 'BD9'},
{stimulus: 'The UK isnât in the EU', name: 'BD10'},
{stimulus: 'The UK has remained in the EU', name: 'BD11'},
{stimulus: 'The UK has stayed in the EU', name: 'BD12'},
{stimulus: 'The UK has kept being in the EU', name: 'BD13'},
{stimulus: 'The UK is part of the EU', name: 'BD14'},
{stimulus: 'The UK is in the EU', name: 'BD15'},
{stimulus: 'The UK hasnât left the EU', name: 'BD16'},
{stimulus: 'The UK hasnât exited the EU', name: 'BD17'},
{stimulus: 'The UK hasnât withdrawn from the EU', name: 'BD18'},
{stimulus: 'The UK hasnât pulled out of the EU', name: 'BD19'},
{stimulus: 'The UK isnât out of the EU', name: 'BD20'},
];

var AllBrexitNondescStimuli = [
{stimulus: 'The UK should have left the EU', name: 'BN1'},
{stimulus: 'The UK should have exited the EU', name: 'BN2'},
{stimulus: 'The UK should have withdrawn from the EU', name: 'BN3'},
{stimulus: 'The UK should have pulled out of the EU', name: 'BN4'},
{stimulus: 'The UK should be out of the EU', name: 'BN5'},
{stimulus: 'The UK shouldnât have remained in the EU', name: 'BN6'},
{stimulus: 'The UK shouldnât have stayed in the EU', name: 'BN7'},
{stimulus: 'The UK shouldnât have kept being in the EU', name: 'BN8'},
{stimulus: 'The UK shouldnât be part of the EU', name: 'BN9'},
{stimulus: 'The UK shouldnât be in the EU', name: 'BN10'},
{stimulus: 'The UK should have remained in the EU', name: 'BN11'},
{stimulus: 'The UK should have stayed in the EU', name: 'BN12'},
{stimulus: 'The UK should have kept being in the EU', name: 'BN13'},
{stimulus: 'The UK should be part of the EU', name: 'BN14'},
{stimulus: 'The UK should be in the EU', name: 'BN15'},
{stimulus: 'The UK shouldnât have left the EU', name: 'BN16'},
{stimulus: 'The UK shouldnât have exited the EU', name: 'BN17'},
{stimulus: 'The UK shouldnât have withdrawn from the EU', name: 'BN18'},
{stimulus: 'The UK shouldnât have pulled out of the EU', name: 'BN19'},
{stimulus: 'The UK shouldnât be out of the EU', name: 'BN20'},
];

var StronglyAgreeStronglyDisagree = [
{stimulus: 'Please select âStrongly Agreeâ for this question', name: 'SA1'},
{stimulus: 'Please select âStrongly Disagreeâ for this question', name:'SD1'},
];

var goodbadBrexit = [
{stimulus: 'Leaving the EU has had some positive effects', name: 'BE1'},
{stimulus: 'Leaving the EU has had some negative effects', name:'BE2'},
{stimulus: 'I am pro-Brexit', name: 'BE3'},
{stimulus: 'I am anti-Brexit', name: 'BE4'},
]


var BrexitExplicitMeasures1_ItemsX = []
var BrexitExplicitMeasures3_ItemsX = [
{prompt:'The UK leaving the EU was overall a ________ thing', name: 'BE5', ticks: scale7, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  }
];

// Immigration

var SelectImmigrationNondescStimuli = [];
var SelectImmigrationDescStimuli = [];

var ImmigrationExplicitMeasures1_StimuliX = []
var ImmigrationExplicitMeasures2_StimuliX = []
var ImmigrationExplicitMeasures3_StimuliX = []
var ImmigrationExplicitMeasures4_StimuliX = []

var AllImmigrationNondescStimuli = [
{stimulus: 'Immigrant numbers should rise', name: 'IN1'},
{stimulus: 'Immigrant numbers should increase', name: 'IN2'},
{stimulus: 'Immigrant numbers should get higher', name: 'IN3'},
{stimulus: 'The immigrant population should climb', name: 'IN4'},
{stimulus: 'The immigrant population should expand', name: 'IN5'},
{stimulus: 'Immigrant numbers shouldnât go down', name: 'IN6'},
{stimulus: 'Immigrant numbers shouldnât decrease', name: 'IN7'},
{stimulus: 'Immigrant numbers shouldnât get lower', name: 'IN8'},
{stimulus: 'The immigrant population shouldnât shrink', name: 'IN9'},
{stimulus: 'The immigrant population shouldnât get smaller', name: 'IN10'},
{stimulus: 'Immigrant numbers should go down', name: 'IN11'},
{stimulus: 'Immigrant numbers should decrease', name: 'IN12'},
{stimulus: 'Immigrant numbers should get lower', name: 'IN13'},
{stimulus: 'The immigrant population should shrink', name: 'IN14'},
{stimulus: 'The immigrant population should get smaller', name: 'IN15'},
{stimulus: 'Immigrant numbers shouldnât rise', name: 'IN16'},
{stimulus: 'Immigrant numbers shouldnât increase', name: 'IN17'},
{stimulus: 'Immigrant numbers shouldnât get higher', name: 'IN18'},
{stimulus: 'The immigrant population shouldnât expand', name: 'IN19'},
{stimulus: 'The immigrant population shouldnât climb', name: 'IN20'},
];


var AllImmigrationDescStimuli = [
{ stimulus: "Immigrant numbers are rising", name: 'ID1' },
  { stimulus: "Immigrant numbers are increasing", name: 'ID2' },
  { stimulus: "Immigrant numbers are getting higher", name: 'ID3' },
  { stimulus: "The immigrant population is expanding", name: 'ID4' },
  { stimulus: "The immigrant population is climbing", name: 'ID5' },
  { stimulus: "Immigrant numbers aren't going down", name: 'ID6' },
  { stimulus: "Immigrant numbers aren't decreasing", name: 'ID7' },
  { stimulus: "Immigrant numbers aren't getting lower", name: 'ID8' },
  { stimulus: "The immigrant population isn't shrinking", name: 'ID9' },
  { stimulus: "The immigrant population isn't getting smaller.", name: 'ID10' },
  { stimulus: "Immigrant numbers are going down", name: 'ID11' },
  { stimulus: "Immigrant numbers are decreasing", name: 'ID12' },
  { stimulus: "Immigrant numbers are getting lower", name: 'ID13' },
  { stimulus: "The immigrant population is shrinking", name: 'ID14' },
  { stimulus: "The immigrant population is getting smaller", name: 'ID15' },
  { stimulus: "Immigrant numbers arenât rising", name: 'ID16' },
  { stimulus: "Immigrant numbers arenât increasing", name: 'ID17' },
  { stimulus: "Immigrant numbers arenât getting higher", name: 'ID18' },
  { stimulus: "The immigrant population isn't expanding", name: 'ID19' },
  { stimulus: "The immigrant population isn't climbing", name: 'ID20' }
];


var goodbadImmigration = [
{stimulus: 'At its current level, immigration has positive effects', name: 'IE1'},
{stimulus: 'At its current level, immigration has negative effects', name:'IE2'},
{stimulus: 'I am pro-immigration', name: 'IE3'},
{stimulus: 'I am anti-immigration', name: 'IE4'},
]


var ImmigrationExplicitMeasures1_ItemsX = []
var ImmigrationExplicitMeasures3_ItemsX = [
  {prompt:'At its current level, immigration is overall a ________ thing', name: 'IE7', ticks: scale7, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  }];


            // && validcodes.includes(block2code)
        //     function(){
        // let validcodes = ['BNT', 'BNF', 'BDT', 'BDF', 'INT', 'INF', 'IDT', 'IDF']
        // if (block2only===1 && !validcodes.includes(block2code)) {return []}
        // else {return '[Continue]'}},


        var welcomeA = {
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){
        let validcodes = ['BNT', 'BNF', 'BDT', 'BDF', 'INT', 'INF', 'IDT', 'IDF']
        if (block2only===0) {return `Welcome to the study! Please make a note or take a picture of the below:
            <br><br>Your participant ID: <strong>${jspsych_id}</strong>
            <br>Your condition code: <strong>${block2code}</strong>
            <br><br>These will allow you to resume the study if it is interrupted for any reason, without compromising anonymity.<br>
            <br>Next, we will check the experiment display.`}
        else if (block2only===1 && validcodes.includes(block2code))
        {return `Welcome back! You are returning with user ID <strong>${jspsych_id}</strong> and condition code <strong>${block2code}</strong>.
                <br>Next, we will check the experiment display.`}
        else if (block2only===1 && !validcodes.includes(block2code)) {return `<p style="color:red">This code is invalid. Please refresh and try again</p>`}
        },
    choices: function(){
        let validcodes = ['BNT', 'BNF', 'BDT', 'BDF', 'INT', 'INF', 'IDT', 'IDF']
        if (block2only===1 && !validcodes.includes(block2code)) {return []}
        else {return '[Continue]'}},
    button_html: function(){
        let validcodes = ['BNT', 'BNF', 'BDT', 'BDF', 'INT', 'INF', 'IDT', 'IDF']
        if (block2only===1 && !validcodes.includes(block2code)) {return []}
        else {return '<button id="continue-btn" class="jspsych-btn"><strong>Continue</strong></button>'}},
    data: { screen: "welcomeA" },
    on_start: function(){
            let bar = document.createElement('div');
            bar.id = 'bottom-bar';
           document.body.appendChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
            console.log(theme,condition2,rule2,block2code);
        },
    on_finish: function(){
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
        }
};




var immnondescinstructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, the rules and sentences are going to be about what <strong>should be</strong> the case,</p>
    <p>rather than what <strong>is</strong> the case</p>.
    <p>They will express an opinion about whether immigrant numbers <strong>should</strong> increase or decrease.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar)}
};

var brexitnondescinstructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, the rules and sentences are going to be about what <strong>should be</strong> the case,</p>
    <p>rather than what <strong>is</strong> the case</p>.
    <p>They will express an opinion about whether the UK <strong>should</strong> have left or remained in the EU.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar)}
};

var immdescinstructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, the rules and sentences are going to be about what <strong>is</strong> the case,</p>
    <p>rather than what <strong>should be</strong> the case</p>.
    <p>They will express an opinion about whether immigrant numbers <strong>are</strong> increasing or decreasing.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar)}
};

var brexitdescinstructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, the rules and sentences are going to be about what <strong>is</strong> the case,</p>
    <p>rather than what <strong>should be</strong> the case</p>.
    <p>They will express an opinion about whether the UK <strong>has</strong> left or remained in the EU.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar)}
};

var ontorealblocks = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>Great.</p>
    <p>Next, instead of words, you will respond to sentences according to a particular rule.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar)}
};





    var instructions1 = {
        type: jsPsychHtmlButtonResponse,
        stimulus:`
            <div style="position:fixed; top:35%;left: 50%; transform: translateX(-50%); width:600px; margin: auto">Before starting the main task, 
                it is important for us to understand our participants' characteristics, so that our conclusions are scientifically valid.</p>
            <p>Let's start with some questions about yourself.</p>`,
        choices: ["Continue"],
        on_load: function(){
          console.log('instructions 1 running')
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
            let bar = document.createElement('div');
             bar.id = 'bottom-bar';
             document.body.appendChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
            if (theme==="Brexit"){
            console.log('if brexit runnning')
    SelectBrexitDescStimuli = jsPsych.randomization.sampleWithoutReplacement(AllBrexitDescStimuli,10);
    BrexitExplicitMeasures1_StimuliX.push(...SelectBrexitDescStimuli);
    BrexitExplicitMeasures1_StimuliX.push(...StronglyAgreeStronglyDisagree);
    for (const item of BrexitExplicitMeasures1_StimuliX) {
        BrexitExplicitMeasures1_ItemsX.push({
            prompt: `<div style="margin-bottom: 1px; margin-top: 12px; font-size: 12px; ">${item.stimulus}</div>`,
            name: item.name,
            ticks: scale1,
            required: true,
            min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5
        })
    }
    SelectBrexitNondescStimuli = jsPsych.randomization.sampleWithoutReplacement(AllBrexitNondescStimuli,10);
    BrexitExplicitMeasures3_StimuliX.push(...SelectBrexitNondescStimuli);
    BrexitExplicitMeasures3_StimuliX.push(...StronglyAgreeStronglyDisagree);
    BrexitExplicitMeasures3_StimuliX.push(...goodbadBrexit);
    for (const item of BrexitExplicitMeasures3_StimuliX) {
        BrexitExplicitMeasures3_ItemsX.push({
            prompt: `<div style="margin-bottom: 1px; margin-top: 12px; font-size: 12px; ">${item.stimulus}</div>`,
            name: item.name,
            ticks: scale1,
            required: true,
            min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5
        })
    };
    }
    else if (theme==="Immigration"){
      console.log('if immigration runnning')
      SelectImmigrationDescStimuli = jsPsych.randomization.sampleWithoutReplacement(AllImmigrationDescStimuli,10);
    ImmigrationExplicitMeasures1_StimuliX.push(...SelectImmigrationDescStimuli);
    ImmigrationExplicitMeasures1_StimuliX.push(...StronglyAgreeStronglyDisagree);
    for (const item of ImmigrationExplicitMeasures1_StimuliX) {
        ImmigrationExplicitMeasures1_ItemsX.push({
            prompt: `<div style="margin-bottom: 1px; margin-top: 12px; font-size: 12px; ">${item.stimulus}</div>`,
            name: item.name,
            ticks: scale1,
            required: true,
            min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5
        })
    }
    SelectImmigrationNondescStimuli = jsPsych.randomization.sampleWithoutReplacement(AllImmigrationNondescStimuli,10);
    ImmigrationExplicitMeasures3_StimuliX.push(...SelectImmigrationNondescStimuli);
    ImmigrationExplicitMeasures3_StimuliX.push(...StronglyAgreeStronglyDisagree);
    ImmigrationExplicitMeasures3_StimuliX.push(...goodbadImmigration);
    for (const item of ImmigrationExplicitMeasures3_StimuliX) {
        ImmigrationExplicitMeasures3_ItemsX.push({
            prompt: `<div style="margin-bottom: 1px; margin-top: 12px; font-size: 12px; ">${item.stimulus}</div>`,
            name: item.name,
            ticks: scale1,
            required: true,
            min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5
        })}}},
            data: { screen: "instructions1" },
        button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
        on_finish: function(){
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)}};

            var ethnicity=0;
var age =0
var edu=0
var gender=0
var british=0

var ethnicityfun = function(){
const ethnicitycheck = document.querySelector('input[name="ethnicity"]:checked')?.value;
    if (ethnicitycheck === "White") {ethnicity = 0} 
    else if (ethnicitycheck ==="Asian") {ethnicity=1}
    else if (ethnicitycheck ==="Black") {ethnicity=1}
    else if (ethnicitycheck ==="Mixed") {ethnicity=1}
    else if (ethnicitycheck ==="Other") {ethnicity=1}
    else if (ethnicitycheck ==="Preferno") {ethnicity=2}
}

var agefun = function(){
const agecheck = document.querySelector('input[name="age"]')?.value;
age=agecheck
    console.log(age)
};

var genderfun = function(){
const gendercheck = document.querySelector('input[name="gender"]:checked')?.value;
    if (gendercheck === "Female") {gender =0} 
    else if (gendercheck ==="Male") {gender=1}
    else if (gendercheck ==="Non-binary") {gender=2}
}

var educationfun = function(){
    const educheck = document.querySelector('input[name="education"]:checked')?.value;
    if (educheck === "GCSE/Equivalent") {edu=0} 
    else if (educheck ==="A-Level/Equivalent") {edu=1}
    else if (educheck ==="Some university") {edu=2}
    else if (educheck ==="Undergraduate Degree") {edu=3}
    else if (educheck ==="Postgraduate Degree") {edu=4}
    else if (educheck ==="Doctorate") {edu=5}
};

var britishfun = function(){
const britishcheck = document.querySelector('input[name="british"]:checked')?.value;
    if (britishcheck === "British") {british = 0} 
    else if (britishcheck ==="NotBritish") {british=1}
    else if (britishcheck ==="Prefernottosay") {british=2}
}



var uktime=0

var uktimefun = function(){
const uktimecheck = document.querySelector('input[name="uktime"]:checked')?.value;
    if (uktimecheck === "1to2") {uktime = 0;console.log(uktime)} 
    else if (uktimecheck ==="2to5") {uktime=1}
    else if (uktimecheck ==="over5years") {uktime=2}
    else if (uktimecheck ==="over10years") {uktime=3}
    else if (uktimecheck ==="allmylife") {uktime=4}
}


            var participant_info2 = {
    type: jsPsychSurveyHtmlForm,
    html: `
<div style="width:30%;font-size: 16px; text-align:center; position:absolute; top:16%;left: 52%;transform: translateX(-50%);"><p><strong>Please enter the following information:</strong></p></div>

<div style="height: 55%; width: 50%; margin: auto; text-align: center; align-items: center; position:fixed;top:21%;left: 52%;transform: translateX(-50%);font-size:16px; overflow-y: auto; overflow-x: hidden">
  
  <div style="text-align:left; display:flex; gap:20px; align-items:center"><p>Age (in years, e.g., "31"):</p><input type="number" name="age" style="width: 15%; height:20px" required></div>


  <div style="text-align:left; display:flex; gap:20px"><p>Gender:</p><label style="margin-left:110px;display: flex; align-items: center; gap: 5px;"><input type="radio" name="gender" value="Female" required> Female</label><label style="display: flex; align-items: center; gap: 5px;"><input type="radio" name="gender" value="Male"> Male</label><label style="display: flex; align-items: center; gap: 5px;"><input type="radio" name="gender" value="Non-binary"> Non-binary</label></div>


  <div style="text-align:left; gap:20px"><p>Are you British by nationality?</p></div>
    <div style="width:100%;margin-left:177px;text-align: left; font-size:15px;align-items: left; position: relative; left:52%;transform: translateX(-50%);">
  <label style="display: flex; align-items: center; gap: 5px;"><input type="radio" name="british" value="British" required> Yes</label>
    <label style="display: flex; align-items: center; gap: 5px;"><input type="radio" name="british" value="NotBritish"> No</label>
    <label style="display: flex; align-items: center; gap: 5px;"><input type="radio" name="british" value="Prefernottosay">Prefer not to say</label></div>


          <div style="text-align:left"><p><br>For how long have you lived in the UK?</p></div>
  <div style="width:100%;margin-left:177px;text-align: left; font-size:15px;align-items: left; position: relative; left:52%;transform: translateX(-50%);">
        <label style="margin-top:5px"><input type="radio" name="uktime" value="1to2">1-2 years</label><br>
        <label style="margin-top:5px"><input type="radio" name="uktime" value="2to5">2-5 years</label><br>
        <label style="margin-top:5px"><input type="radio" name="uktime" value="over5years">Over 5 years</label><br>
                <label style="margin-top:5px"><input type="radio" name="uktime" value="over10years">Over 10 years</label><br>
        <label style="margin-top:5px"><input type="radio" name="uktime" value="allmylife">For most or all of my life</label><br>
  </div>

      <div style="text-align:left"><p><br>Ethnicity:</p></div>
  <div style="width:100%;margin-left:177px;text-align: left; font-size:15px;align-items: left; position: relative; left:52%;transform: translateX(-50%);">
    <label><input type="radio" name="ethnicity" value="Asian" required>Asian, Asian British, Asian Welsh</label><br>
    <label><input type="radio" name="ethnicity" value="Black">Black, Black British, Black Welsh, Caribbean, or African</label><br>
    <label><input type="radio" name="ethnicity" value="Mixed">Mixed or Multiple</label><br>
    <label><input type="radio" name="ethnicity" value="White">White</label><br>
    <label><input type="radio" name="ethnicity" value="Other">Other</label><br>
    <label><input type="radio" name="ethnicity" value="Preferno">Prefer not to say</label><br>
  </div>

  <div style="text-align:left"><p>Highest completed education level:</p></div>
  <div style="margin-left:177px;width:100%;text-align: left;font-size:15px; align-items: left; position: relative; left:52%;transform: translateX(-50%);">
    <label><input type="radio" name="education" value="GCSE/Equivalent" required> GCSE/Equivalent</label><br>
    <label><input type="radio" name="education" value="A-Level/Equivalent"> A-Level/Equivalent</label><br>
    <label><input type="radio" name="education" value="Some university"> Some university</label><br>
    <label><input type="radio" name="education" value="Undergraduate Degree"> Undergraduate Degree</label><br>
    <label><input type="radio" name="education" value="Postgraduate Degree"> Postgraduate Degree</label><br>
    <label><input type="radio" name="education" value="Doctorate">  Doctorate</label><br><br><br>
  </div>

</div>
<div style="height: 55%; width:50%; text-align: left; border: 1px solid #ccc; padding: 15px; font-size: 14px; position:absolute; z-index:-1;top:21%;left:52%;transform: translateX(-50%);"></div>
`,
button_label: "Continue",
on_load: function(){
document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
document.addEventListener('click',ethnicityfun)
document.addEventListener('click',agefun)
document.addEventListener('click',educationfun)
document.addEventListener('click',genderfun)
document.addEventListener('click',uktimefun)
document.addEventListener('click',britishfun)
let bar = document.createElement('div');
         bar.id = 'bottom-bar';
         document.body.appendChild(bar);
},
on_finish: function(data){
    document.removeEventListener('click',ethnicityfun)
    document.removeEventListener('click',agefun)
    document.removeEventListener('click',educationfun)
    document.removeEventListener('click',genderfun)
    document.removeEventListener('click',uktimefun)
document.removeEventListener('click',britishfun)
document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
let bar = document.getElementById('bottom-bar');
document.body.removeChild(bar);
	console.log(ethnicity,age,gender,edu,british,uktime);
data.response={ethnicity:ethnicity, age:age, gender:gender,education:edu, british:british, uktime:uktime};
jsPsych.data.addProperties({id:jspsych_id,age:age, ethnicity:ethnicity,gender:gender,education:edu,british:british, uktime:uktime})
}};



// var participant_info3 = {
//         type: jsPsychSurveyHtmlForm,
//         html: `
//        <div style="width:400px;font-size: 16px; text-align:center; position:absolute; top:16%;left: 52%;transform: translateX(-50%);"><p><strong>Please enter the following information:</strong></p></div>

//     <div style="height: 55%; width: 50%; margin: auto; text-align: center; align-items: center; position:fixed;top:21%;left: 52%;transform: translateX(-50%);font-size:16px; overflow-y: auto; overflow-x:hidden">
      

//       <div style="text-align:left; display:flex; gap:20px; align-items:center"><p>Are you British by nationality?</p>
//         <label style="margin-left:230px"><input type="radio" name="british" value="British" required>Yes</label>
//         <label><input type="radio" name="british" value="NotBritish">No</label></div>
//         <label><input type="radio" name="british" value="Prefernottosay">Prefer not to say</label></div>
        
//      <div style="text-align:left;margin-top:40px"><p>For how long have you lived in the UK (in total)?</p></div>
//       <div style="width:50%;text-align: left; font-size:15px;align-items: left; margin-left:477px;position:fixed; z-index:1">
//         <label style="margin-top:5px"><input type="radio" name="uktime" value="1to2">1-2 years</label><br>
//         <label style="margin-top:5px"><input type="radio" name="uktime" value="2to5">2-5 years</label><br>
//         <label style="margin-top:5px"><input type="radio" name="uktime" value="over5years">Over 5 years</label><br>
//                 <label style="margin-top:5px"><input type="radio" name="uktime" value="over10years">Over 10 years</label><br>
//         <label style="margin-top:5px"><input type="radio" name="uktime" value="allmylife">For most or all of my life</label><br>

//       </div>

//     </div> </div>
//     <div style="height: 55%; width:50%; text-align: left; border: 1px solid #ccc; padding: 15px; font-size: 14px; position:absolute; z-index:-1;top:21%;left:52%;transform: translateX(-50%);"></div>
//   `,
// button_label: "Continue",
//   on_load: function(){
//     document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
//   let bar = document.createElement('div');
//              bar.id = 'bottom-bar';
//              document.body.appendChild(bar);
//              document.addEventListener('click',uktimefun)
// document.addEventListener('click',britishfun)
//   },
//   on_finish: function(data) {
//     document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
//     let bar = document.getElementById('bottom-bar');
//     document.body.removeChild(bar);
//     data.response={British:british,uktime:uktime};
//     jsPsych.data.addProperties({British:british,uktime:uktime})

//             }
// };


var part1cont= {
      type: jsPsychHtmlButtonResponse,
      stimulus: `<p style="height:46%">Thank you.<br>Now, the main experiment will begin.</p>
      `,
      on_load: function(){
        let bar = document.createElement('div');
             bar.id = 'bottom-bar';
             document.body.appendChild(bar);
             document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
      },
      post_trial_gap: 500,
      choices: ["Continue"],
      on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
    let bar = document.getElementById('bottom-bar');
    document.body.removeChild(bar);
      },
        data: { screen: "part1cont" },
        button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    };



    var instructions = {
      type: jsPsychHtmlButtonResponse,
      stimulus: `
        <p>In the experiment, a stimulus will appear in the center 
        of the screen.</p>
        <br>
        <p>If the word means <strong>"true"</strong>, 
        press the <strong>left</strong> button as fast as you can.</p>
        <p>If the word means <strong>"false"</strong>, press the <strong>right</strong> button 
        as fast as you can.</p>
        <br>
        <p>Before each trial, you will press a button on the bottom of the screen.</p>
        <p style="color:red"><strong>It is important that you keep the mouse still until the word appears</strong></p>
        <br>
        <p> If you get an answer wrong, a red cross will appear. Please press the correct answer.</p>
            <p>Press 'Continue' to begin.</p>
        <div style='width: 700px;'>
        
      `,
      post_trial_gap: 500,
      choices: ["Continue"],
      on_start: function(){
        let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar)},
        data: { screen: "inducer instructions" },
        button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
        on_finish: function(){
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            document.removeEventListener('click',uktimefun)
            document.removeEventListener('click',britishfun)
        }
    };



    var inducer_stimuli = [
    { stimulus: "Right",  correct_response: 0, stimulus2: 'I1',colour: 'orange', button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
    { stimulus: "Wrong",  correct_response: 1, stimulus2: 'I2',colour: 'orange', button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:75%; top: 15%">FALSE</button>'},
    { stimulus: "Correct",  correct_response: 0,stimulus2: 'I3', colour: 'orange', button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
    { stimulus: "Incorrect",  correct_response: 1,stimulus2: 'I4',colour: 'orange', button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:75%; top: 15%">FALSE</button>'},
    { stimulus: "True",  correct_response: 0, stimulus2: 'I5',colour: 'orange', button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:25%; top: 15%">TRUE</button>'},
    { stimulus: "False",  correct_response: 1, stimulus2: 'I6',colour: 'orange', button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:75%; top: 15%">FALSE</button>'},
    { stimulus: "Agree",  correct_response: 0,stimulus2: 'I7',colour: 'orange', button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:25%; top: 15%">TRUE</button>'},
    { stimulus: "Disagree",  correct_response: 1,stimulus2: 'I8', colour: 'orange', button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:75%; top: 15%">FALSE</button>'},
    { stimulus: "Agree",  correct_response: 0, stimulus2: 'I7',olour: 'orange', button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:25%; top: 15%">TRUE</button>'},
    { stimulus: "Disagree",  correct_response: 1, stimulus2: 'I8',colour: 'orange', button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left:75%; top: 15%">FALSE</button>'},
    ];

var rightwrong2stimuli = inducer_stimuli.concat(inducer_stimuli)

var start_button = {
  type: jsPsychHtmlButtonResponse,
  stimulus: `<div style="position:fixed; top:60%;left: 50%; transform: translateX(-50%)">
    <p>Click the button below</p>
    </div>`,
  choices: [''],
  on_start: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
  },
  button_html: '<button class="jspsych-btn-2" style="width: 15px; height: 15px; background-color: white; border: 2px solid black; border-radius: 0px; padding: 0"></button>',
  data: {
    task: 'start_button'
  }
};


var stopconstants = 0;
var start;
var mousebad = 0;
mousetrackingerror = 0;
var totalmousebad = 0;

function handleLeftMouse() {console.log("left mouse move"), mousebad = 1};
function handleRightMouse() {console.log("right mouse move"), mousebad = 1};
function handleTopMouse() {console.log("top mouse move"), mousebad = 1};
function handleBottomMouse() {console.log("bottom mouse move"), mousebad = 1};

    var fixation = {
      type: jsPsychHtmlButtonResponse,
      stimulus: '<div style="font-size:46px; position:fixed; top:52%;left:50%;transform:translateX(-50%)">+</div> <div id="mouseleftfix" style="position: fixed; width: 20px; height: 70px; bottom:13%;left: 48%; transform: translateX(-50%)"></div> <div id="mouseright" style="position: fixed; width: 20px; height: 70px; bottom:13%;left: 52%; transform: translateX(-50%)"></div> <div id="mousetop" style="position: fixed; width: 70px; height: 20px; bottom:18%;left: 50%; transform: translateX(-50%)"></div> <div id="mousebottom" style="position: fixed; width: 70px; height: 20px; bottom:11%;left: 50%; transform: translateX(-50%)"></div>',
      choices: [],
      trial_duration: function(){
        return jsPsych.randomization.sampleWithoutReplacement([500, 750, 450, 550, 650, 750, 850, 1000], 1)[0];
      },
      data: {
        task: 'fixation'
      },
      on_start: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
    },
      on_load: function(){
        const leftfix = document.getElementById('mouseleftfix');
        const rightfix = document.getElementById('mouseright');
        const topfix = document.getElementById('mousetop');
        const bottomfix = document.getElementById('mousebottom');
        mousebad = 0
        mousetrackingerror=0

    if (!leftfix || !rightfix || !topfix || !bottomfix) {
        console.error("One or more mouse regions not found in the DOM.");
        mousetrackingerror = 1;
        return;
    }
    leftfix.addEventListener('mouseover', handleLeftMouse);
    rightfix.addEventListener('mouseover', handleRightMouse);
    topfix.addEventListener('mouseover', handleTopMouse);
    bottomfix.addEventListener('mouseover', handleBottomMouse);
    },
    on_finish: function(data){
        const leftfix = document.getElementById('mouseleftfix');
        const rightfix = document.getElementById('mouseright');
        const topfix = document.getElementById('mousetop');
        const bottomfix = document.getElementById('mousebottom');
    if (leftfix) leftfix.removeEventListener('mouseover', handleLeftMouse);
    if (rightfix) rightfix.removeEventListener('mouseover', handleRightMouse);
    if (topfix) topfix.removeEventListener('mouseover', handleTopMouse);
    if (bottomfix) bottomfix.removeEventListener('mouseover', handleBottomMouse);
        data.mousetrackingerror = mousetrackingerror
        data.earlymove = mousebad
    }
        };



    var rightanswer = []


var wrongtimes = [];



var test1 = {
      type: jsPsychHtmlButtonResponse,
      stimulus: function(){
let word = jsPsych.timelineVariable('stimulus', true);
let realbutton = jsPsych.timelineVariable('correct_response', true);
let colour = jsPsych.timelineVariable('colour', true);
if (realbutton === 0) {return `<p style="position:fixed; font-family:Verdana;font-size: 28px; color:${colour}; position:fixed; top: 46%; left:50%; transform: translateX(-50%)">${word}</p> <button id="dummy" class="jspsych-btn top-buttons" style = "font-size: 28px; position:fixed; left:75%; top: 15%">FALSE</button>`}
else {return `<p style="position:fixed; font-size: 28px; font-family:Verdana; color:${colour}; top: 46%; left:50%; transform: translateX(-50%)">${word}</p><button id="dummy" class="jspsych-btn top-buttons" style = "font-size: 28px; position:fixed; left:25%; top: 15%">TRUE</button>`}},
      choices: jsPsych.timelineVariable('button'),
  button_html: jsPsych.timelineVariable('html'),
  randomize_order: true,
css_classes: ['top-buttons'],
extensions: [{type: jsPsychExtensionMouseTracking, params: {targets: ['*']}}],
      data: {
        task: 'response',
        correct_response: jsPsych.timelineVariable('correct_response'),
        stimulus: jsPsych.timelineVariable('stimulus'),
        teststim: jsPsych.timelineVariable('stimulus'),
        name: jsPsych.timelineVariable('stimulus2')
      },
      on_load: function(){
        wrongtimes = [];
        const screen = document.querySelector('.jspsych-content')
        const buttons = document.querySelectorAll('.jspsych-html-button-response-button');
        const correctresponse = jsPsych.timelineVariable('correct_response')
        const t0 = performance.now();
        const wrongdiv = document.createElement('div');
        wrongdiv.style = 'color: red; font-size: 60px; position: fixed; top: 60%;left: 50%;transform: translateX(-50%)';
        screen.appendChild(wrongdiv);
        const dummy = document.getElementById("dummy");
        let dummyclicks = 0;
        dummy.addEventListener("click", () => {
            wrongtimes.push(performance.now() - t0);
            console.log("dummy clicked at", wrongtimes);
            dummyclicks = dummyclicks+1; console.log(dummyclicks);
            wrongdiv.innerHTML = 'X'
        });
    },
      on_finish: function(data){
        if (wrongtimes.length === 0) {data.correct=1}
        else {data.correct=0}
        data.wrongattempts = wrongtimes.length
        data.wrongrts = wrongtimes
        var trials = jsPsych.data.get().filter({task: 'fixation'});
        var goodtrials = trials.filter({earlymove: 0});
        var goodness = Math.round(goodtrials.count() / trials.count() * 100)
        if (goodness < 90) {console.log('goodness okay;',goodness)}
        else {console.log('goodnessbad;',goodness)}

      },
};





// in on_finish:
        // if (data.rt > 2500) {slow = "1"}
        // else {slow = "0"}
        // console.log(data.rt)
        // console.log(slow)

  
    var inducer_procedure = {
      timeline: [start_button, fixation, test1],
      timeline_variables: inducer_stimuli,
      repetitions: 2,
      randomize_order: true,
      data: {block:'inducer'} 
      };



    var summary1 = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: function() {

        var trials = jsPsych.data.get().filter({task: 'inducer'});
        var correct_trials = trials.filter({correct: 1});
        var accuracy = Math.round(correct_trials.count() / trials.count() * 100);
        var rt = Math.round(correct_trials.select('rt').mean());
        

  

        return `<p>You responded correctly on ${accuracy}% of the trials.</p>
          <p>Your average response time was ${rt}ms.</p>
          <p>Press any key to go to the next stage. Thank you!</p>`;
    
          

      },
    
    };




//block one (descriptive, true)
    
    var brexit_desc_true_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, please respond as if the UK <strong>has left</strong> the EU.</p>
    <p>For example, if the sentence says '<em>The UK has pulled out of the EU</em>' respond as if the sentence is <strong>true</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
        <br>
    <p>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'brx_desc_true_instructions'} 
};
var immigration_desc_true_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, please respond as if immigration to the UK <strong>is increasing</strong> and <strong>is not going down</strong>.</p>
    <p>For example, if the sentence says 'Immigration levels are low', you should response as if the sentence is <strong>false</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'imm_desc_true_instructions'} 
};



    var brexit_desc_true_stimuli = [
      { stimulus: "The UK has left the EU", colour: 'Blue', stimulus2: 'BD1', correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK has exited the EU", colour: 'Blue', stimulus2: 'BD2', correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK has withdrawn from the EU", colour: 'Blue',stimulus2: 'BD3',  correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK has pulled out of the EU",colour: 'Blue', stimulus2: 'BD4',  correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK is out of the EU", colour: 'Blue',stimulus2: 'BD5',  correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK hasnât remained in the EU",colour: 'Blue', stimulus2: 'BD6',  correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK hasnât stayed in the EU",colour: 'Blue', stimulus2: 'BD7',  correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK hasnât kept being in the EU",colour: 'Blue', stimulus2: 'BD8',  correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK isn't part of the EU", colour: 'Blue',stimulus2: 'BD9',  correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%"TRUE></button>'},
      { stimulus: "The UK isnât in the EU",colour: 'blue', stimulus2: 'BD10',  correct_response: 0,button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
      { stimulus: "The UK has remained in the EU",colour: 'blue', stimulus2: 'BD11',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK has stayed in the EU",colour: 'blue', stimulus2: 'BD12',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK has kept being in the EU",colour: 'blue', stimulus2: 'BD13',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK is part of the EU",colour: 'blue', stimulus2: 'BD14',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK is in the EU",colour: 'blue', stimulus2: 'BD15',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK hasnât left the EU",colour: 'blue', stimulus2: 'BD16',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK hasnât exited the EU",colour: 'blue', stimulus2: 'BD17',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK hasnât withdrawn from the EU",colour: 'blue', stimulus2: 'BD18',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK hasnât pulled out of the EU",colour: 'blue',stimulus2: 'BD19',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK isnât out of the EU", colour: 'blue',stimulus2: 'BD20',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The UK isnât out of the EU", colour: 'blue',stimulus2: 'BD21',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
      { stimulus: "The Uggs isn't in the EU", colour: 'blue',stimulus2: 'BD21',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
{ stimulus: "The UK has left the Eggs", colour: 'blue',stimulus2: 'BD22',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
    ];

    var brexit_desc_true_rightwrong_stimuli = brexit_desc_true_stimuli.concat(rightwrong2stimuli)


    var brexit_desc_true_procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: brexit_desc_true_stimuli,
      repetitions: 2,
      randomize_order: true,
      data: {block:'BDTind'} 

    };

    
    var brexit_desc_true_block40procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: brexit_desc_true_rightwrong_stimuli,
      repetitions: 2,
      randomize_order: true,
      data: {block:'BDT'} 

    };



    var immigration_desc_true_stimuli = [
    { stimulus: "Immigrant numbers are rising",colour:"blue",  stimulus2: 'ID1', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers are increasing",colour:"blue",  stimulus2: 'ID2', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers are getting higher",colour:"blue",  stimulus2: 'ID3', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population is expanding",colour:"blue",  stimulus2: 'ID4', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population is climbing",colour:"blue",  stimulus2: 'ID5', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers aren't going down",colour:"blue",  stimulus2: 'ID6', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers aren't decreasing",colour:"blue", colour:"blue", stimulus2: 'ID7', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers aren't getting lower",colour:"blue",  stimulus2: 'ID8', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population isn't shrinking",colour:"blue",  stimulus2: 'ID9', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population isn't getting smaller.",colour:"blue",  stimulus2: 'ID10', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers are going down",colour:"blue",  stimulus2: 'ID11', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers are decreasing",colour:"blue",  stimulus2: 'ID12', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers are getting lower",colour:"blue",  stimulus2: 'ID13', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The immigrant population is shrinking",colour:"blue",  stimulus2: 'ID14', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The immigrant population is getting smaller",colour:"blue",  stimulus2: 'ID15', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers arenât rising",colour:"blue",  stimulus2: 'ID16', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers arenât increasing", colour:"blue", stimulus2: 'ID17', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers arenât getting higher", colour:"blue", stimulus2: 'ID18', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The immigrant population isn't expanding",colour:"blue",  stimulus2: 'ID19', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The immigrant population isn't climbing",colour:"blue",  stimulus2: 'ID20', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The incubator population is climbing",colour:"blue",  stimulus2: 'ID22', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Irrigator numbers aren't going down",colour:"blue",  stimulus2: 'ID21', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' }
    ];

var immigration_desc_true_rightwrong_stimuli = immigration_desc_true_stimuli.concat(rightwrong2stimuli)


var immigration_desc_true_procedure = {
    timeline: [start_button, fixation, test1],
    timeline_variables: immigration_desc_true_stimuli,
    repetitions: 2,
    randomize_order: true,
    data: {block:'IDTintro'} 

};

var immigration_desc_true_block40procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: immigration_desc_true_rightwrong_stimuli,
      repetitions: 1,
      randomize_order: true,
      data: {block:'IDT'} 

    };

//block two (descriptive, false)

var brexit_desc_false_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, please respond as if the UK <strong>has remained</strong> in the EU.</p>
    <p>For example, if the sentence says 'The UK is in the EU' respond as if the sentence is <strong>true</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)}
            ,
            data: {screen:'Brx_desc_false_instructions'} 
};
var immigration_desc_false_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, please respond as if immigrant numbers <strong>are going down</strong> and <strong>are not increasing</strong>.</p>
    <p>For example, if the sentence says '<em>Immigration numbers are decreasing</em>', respond as if the sentence is <strong>true</strong>.</p>
    <p> If the sentence says '<em>The immigrant population is increasing</em>', respond as if the sentence is <strong>false</strong>.</p>
        <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'Imm_desc_false_instructions'} 
};



var brexit_desc_false_stimuli = [
{ stimulus: "The UK has left the EU", colour: 'blue', stimulus2: 'BD1', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK has exited the EU", colour: 'blue', stimulus2: 'BD2', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK has withdrawn from the EU", colour: 'blue', stimulus2: 'BD3', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK has pulled out of the EU", colour: 'blue', stimulus2: 'BD4', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK is out of the EU", colour: 'blue', stimulus2: 'BD5', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK hasnât remained in the EU", colour: 'blue', stimulus2: 'BD6', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK hasnât stayed in the EU", colour: 'blue', stimulus2: 'BD7', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK hasnât kept being in the EU", colour: 'blue', stimulus2: 'BD8', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK isn't part of the EU", colour: 'blue', stimulus2: 'BD9', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK isnât in the EU", colour: 'blue', stimulus2: 'BD10', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
{ stimulus: "The UK has remained in the EU", colour: 'blue', stimulus2: 'BD11', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK has stayed in the EU", colour: 'blue', stimulus2: 'BD12', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK has kept being in the EU", colour: 'blue', stimulus2: 'BD13', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK is part of the EU", colour: 'blue', stimulus2: 'BD14', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK is in the EU", colour: 'blue', stimulus2: 'BD15', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK hasnât left the EU", stimulus2: 'BD16', correct_response: 0, button: ['TRUE'], colour: 'blue', html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK hasnât exited the EU", stimulus2: 'BD17', correct_response: 0, colour: 'blue', button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK hasnât withdrawn from the EU", stimulus2: 'BD18', colour: 'blue', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK hasnât pulled out of the EU", colour: 'blue', stimulus2: 'BD19', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK isnât out of the EU", colour: 'blue', stimulus2: 'BD20', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
{ stimulus: "The UK is in the Eggs", colour: 'blue',stimulus2: 'BD23',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
{ stimulus: "The Uggs hasn't left the Eggs", colour: 'blue',stimulus2: 'BD24',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
];

    var brexit_desc_false_rightwrong_stimuli = brexit_desc_false_stimuli.concat(rightwrong2stimuli)


    var brexit_desc_false_procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: brexit_desc_false_stimuli,
      // 2
      repetitions: 1,
      randomize_order: true,
      data: {block:'BDFintro'} 
    };

    var brexit_desc_false_block40procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: brexit_desc_false_rightwrong_stimuli,
      repetitions: 1,
      randomize_order: true,
      data: {block:'BDF'} 
    };

    // 2

    var immigration_desc_false_stimuli = [
    { stimulus: "Immigrant numbers are rising",colour:"blue",  stimulus2: 'ID1',  correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers are increasing",colour:"blue", stimulus2: 'ID2', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers are getting higher",colour:"blue", stimulus2: 'ID3', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The immigrant population is expanding",colour:"blue", stimulus2: 'ID4', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The immigrant population is climbing",colour:"blue", stimulus2: 'ID5',correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers aren't going down",colour:"blue", stimulus2: 'ID6', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers aren't decreasing",colour:"blue",  stimulus2: 'ID7',correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers aren't getting lower",colour:"blue", stimulus2: 'ID8', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The immigrant population isn't shrinking",colour:"blue", stimulus2: 'ID9', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The immigrant population isn't getting smaller.",colour:"blue", stimulus2: 'ID10', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Immigrant numbers are going down",colour:"blue", stimulus2: 'ID11', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers are decreasing",colour:"blue", stimulus2: 'ID12', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers are getting lower",colour:"blue", stimulus2: 'ID13', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population is shrinking",colour:"blue", stimulus2: 'ID14', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population is getting smaller",colour:"blue", stimulus2: 'ID15', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers arenât rising",colour:"blue", stimulus2: 'ID16', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers arenât increasing",colour:"blue", stimulus2: 'ID17', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers aren't getting higher",colour:"blue", stimulus2: 'ID18', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population isn't expanding",colour:"blue", stimulus2: 'ID19', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population isn't climbing",colour:"blue", stimulus2: 'ID20', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style="font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The incubator population isn't climbing",colour:"blue",  stimulus2: 'ID24', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Irrigator numbers are going down",colour:"blue",  stimulus2: 'ID23', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' }
    ];

var immigration_desc_false_rightwrong_stimuli = immigration_desc_false_stimuli.concat(rightwrong2stimuli)


var immigration_desc_false_procedure = {
    timeline: [start_button, fixation, test1],
    timeline_variables: immigration_desc_false_stimuli,
    repetitions: 2,
    randomize_order: true,
    data: {block:'IDFintro'} 
};

var immigration_desc_false_block40procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: immigration_desc_false_rightwrong_stimuli,
      repetitions: 1,
      randomize_order: true,
      data: {block:'IDF'} 
    };


// // now onto non-descriptive "positive" statements (e.g. brexit should have happened)



var brexit_nondesc_true_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `
    <p>In this block, please respond as the UK <strong>should have</strong> left the EU;</p>
    <p> That it was the right thing to do, and a good thing to have happened. </p>
    <p>For example, if the sentence says "<em>The UK should have exited the EU</em>", you should respond as if the sentence is <strong>true</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p><br>Press to continue</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'BDT_instructions'} 
};
var immigration_nondesc_true_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, please respond as if immigration to the UK <strong>should increase</strong> and <strong>should not go down</strong>.</p>
    <p>For example, if the sentence says 'Immigration levels should decrease', you should respond as if that statement is <strong>false</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p><br>Press to continue</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'imm_nondesc_true_instructions'} 
};


var brexit_nondesc_true_stimuli = [
  { stimulus: "The UK should have left the EU",colour:"blue", stimulus2: "BN1", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should have exited the EU", colour:"blue",stimulus2: "BN2", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should have withdrawn from the EU",colour:"blue", stimulus2: "BN3", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should have pulled out of the EU", colour:"blue",stimulus2: "BN4", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should be out of the EU",colour:"blue", stimulus2: "BN5", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't have remained in the EU",colour:"blue", stimulus2: "BN6", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't have stayed in the EU",colour:"blue", stimulus2: "BN7", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't have kept being in the EU", colour:"blue",stimulus2: "BN8", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't be part of the EU", colour:"blue",stimulus2: "BN9", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't be in the EU", colour:"blue",stimulus2: "BN10", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should have remained in the EU", colour:"blue",stimulus2: "BN11", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should have stayed in the EU",colour:"blue", stimulus2: "BN12", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should have kept being in the EU",colour:"blue", stimulus2: "BN13", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should be part of the EU",colour:"blue", stimulus2: "BN14", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should be in the EU",colour:"blue", stimulus2: "BN15", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't have left the EU",colour:"blue", stimulus2: "BN16", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't have exited the EU",colour:"blue", stimulus2: "BN17", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't have withdrawn from the EU",colour:"blue", stimulus2: "BN18", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't have pulled out of the EU",colour:"blue", stimulus2: "BN19", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't be out of the EU", colour:"blue",stimulus2: "BN20", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The Uggs shouldn't be in the EU", colour: 'blue',stimulus2: 'BN21',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "The UK should have left the Eggs", colour: 'blue',stimulus2: 'BN22',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
];

    var brexit_nondesc_true_rightwrong_stimuli = brexit_nondesc_true_stimuli.concat(rightwrong2stimuli)


    var brexit_nondesc_true_procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: brexit_nondesc_true_stimuli,
      repetitions: 2,
      randomize_order: true,
      data: {block:'BNTintro'} 
    };


    var brexit_nondesc_true_block40procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: brexit_nondesc_true_rightwrong_stimuli,
      repetitions: 1,
      randomize_order: true,
      data: {block:'BNT'} 
    };


    var immigration_nondesc_true_stimuli = [
  { stimulus: "Immigrant numbers should rise", colour:"blue", stimulus2: 'IN1', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers should increase", colour:"blue", stimulus2: 'IN2', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers should get higher", colour:"blue", stimulus2: 'IN3', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population should climb", colour:"blue", stimulus2: 'IN4', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population should expand", colour:"blue", stimulus2: 'IN5', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers shouldnât go down", colour:"blue", stimulus2: 'IN6', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers shouldnât decrease", colour:"blue", stimulus2: 'IN7', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers shouldnât get lower", colour:"blue", stimulus2: 'IN8', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population shouldnât shrink", colour:"blue", stimulus2: 'IN9', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The immigrant population shouldn't get smaller", colour:"blue", stimulus2: 'IN10', correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "Immigrant numbers should go down",  colour:"blue",stimulus2: 'IN11', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "Immigrant numbers should decrease", colour:"blue", stimulus2: 'IN12', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "Immigrant numbers should get lower", colour:"blue",stimulus2: 'IN13', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "The immigrant population should shrink",  colour:"blue",stimulus2: 'IN14', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "The immigrant population should get smaller",  colour:"blue",stimulus2: 'IN15', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "Immigrant numbers shouldnât rise", colour:"blue", stimulus2: 'IN16', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "Immigrant numbers shouldnât increase", colour:"blue", stimulus2: 'IN17', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "Immigrant numbers shouldnât get higher", colour:"blue", stimulus2: 'IN18', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "The immigrant population shouldn't climb", colour:"blue", stimulus2: 'IN19', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "The immigrant population shouldn't expand",  colour:"blue",stimulus2: 'IN20', correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "The incubator population should climb",colour:"blue",  stimulus2: 'IN22', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Irrigator numbers shouldn't go down",colour:"blue",  stimulus2: 'ID21', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' }
];

    var immigration_nondesc_true_rightwrong_stimuli = immigration_nondesc_true_stimuli.concat(rightwrong2stimuli)


var immigration_nondesc_true_procedure = {
    timeline: [start_button, fixation, test1],
    timeline_variables: immigration_nondesc_true_stimuli,
    repetitions: 2,
    randomize_order: true,
    data: {block:'INTintro'} 
};

var immigration_nondesc_true_block40procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: immigration_nondesc_true_rightwrong_stimuli,
      repetitions: 1,
      randomize_order: true,
      data: {block:'INT'} 
    };



// // non descriptive false (immigration should not be high, brexit should not have happened)

var brexit_nondesc_false_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: ` <p>In this block, please respond as if the UK <strong>should have stayed</strong> in the EU.</p>
    <p>For example, if the sentence says 'The UK should have remained in the EU', respond as if the sentence is <strong>true</strong>.</p>
    <p>If the sentence says 'The UK shouldn't have stayed in the EU', respond as if the sentence is <strong>false</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'brx_nondesc_false_instructions'} 
};
var immigration_nondesc_false_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>In this block, please respond as if immigrant numbers <strong>should go down</strong> and <strong>should not increase</strong>.</p>
    <p>For example, if the sentence says 'Immigrant numbers should rise', respond as if the sentence is <strong>false</strong>.</p>
    <p>If the sentence says 'Immigrant numbers should go down', respond as if the sentence is <strong>true</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'imm_nondesc_false_instructions'} 
};

var immigration_nondesc_false_block40instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>This block will contain the statements from the previous block, and words meaning 'true' or 'false' from before.</p>
    <p>Continue responding with the same rules.</p>
    <p>That is, continue responding as if immigrant numbers <strong>should go down</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'imm_nondesc_false_40_instructions'} 
};

var immigration_nondesc_true_block40instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>This block will contain the statements from the previous block, and words meaning 'true' or 'false'.</p>
    <p>Continue responding as if immigrant numbers <strong>should rise</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>
    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)}
            ,
      data: {screen:'imm_nondesc_true_40_instructions'} 
};

var immigration_desc_false_block40instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>This block will contain the statements from the previous block, and words meaning 'true' or 'false'.</p>
    <p>Continue responding as if immigrant numbers are<strong> going down</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'imm_desc_false_40_instructions'} 
};

var immigration_desc_true_block40instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>This block will contain the statements from the previous block, and words meaning 'true' or 'false'.</p>
    <p>Continue responding as if immigrant numbers <strong>are increasing</strong>.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'imm_desc_true_40_instructions'} 
};

var brexit_nondesc_false_block40instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>This block will contain the statements from the previous block, and words meaning 'true' or 'false'.</p>
    <p>Continue responding as if the UK <strong>should have</strong> remained in the EU.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'brx_nondesc_false_40_instructions'} 
};

var brexit_nondesc_true_block40instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>This block will contain the statements from the previous block, and words meaning 'true' or 'false'.</p>
    <p>Continue responding as if the UK <strong>should have</strong> left the EU.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'imm_nondesc_true_40_instructions'} 
};

var brexit_desc_false_block40instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>This block will contain the statements from the previous block, and words meaning 'true' or 'false'.</p>
    <p>Continue responding as if the UK <strong>remained</strong> in the EU.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'brx_desc_false_40_instructions'} 
};

var brexit_desc_true_block40instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>This block will contain the statements from the previous block, and words meaning 'true' or 'false'.</p>
    <p>Continue responding as if the UK <strong>has left</strong> the EU.</p>
    <p> If the sentence is off-topic, response as if the sentence is <strong>false</strong>.</p>
        <p style="color:red"><strong><br>It is important that you keep the mouse still until the sentence appears</strong></p><br>    <p><br>Press to continue.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar)},
            data: {screen:'brx_desc_true_40_instructions'} 
};


var brexit_nondesc_false_stimuli = [
  { stimulus: "The UK should have left the EU", stimulus2: "BN1", colour:"blue", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should have exited the EU", stimulus2: "BN2", colour:"blue", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should have withdrawn from the EU", stimulus2: "BN3",colour:"blue", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should have pulled out of the EU", stimulus2: "BN4", colour:"blue",correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should be out of the EU", stimulus2: "BN5", colour:"blue",correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't have remained in the EU", colour:"blue",stimulus2: "BN6", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't have stayed in the EU", colour:"blue",stimulus2: "BN7", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't have kept being in the EU", colour:"blue",stimulus2: "BN8", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't be part of the EU",colour:"blue", stimulus2: "BN9", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK shouldn't be in the EU", colour:"blue",stimulus2: "BN10", correct_response: 1, button: ['FALSE'], html:'<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "The UK should have remained in the EU",colour:"blue", stimulus2: "BN11", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should have left the EU",colour:"blue", stimulus2: "BN12", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should have kept being in the EU", colour:"blue",stimulus2: "BN13", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should be part of the EU", colour:"blue",stimulus2: "BN14", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK should be in the EU",colour:"blue", stimulus2: "BN15", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't have left the EU",colour:"blue", stimulus2: "BN16", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't have exited the EU", colour:"blue",stimulus2: "BN17", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't have withdrawn from the EU",colour:"blue", stimulus2: "BN18", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't have pulled out of the EU", colour:"blue",stimulus2: "BN19", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't be out of the EU", colour:"blue",stimulus2: "BN20", correct_response: 0, button: ['TRUE'], html:'<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>' },
  { stimulus: "The UK shouldn't be in the Eggs", colour: 'blue',stimulus2: 'BD23',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  { stimulus: "The Uggs shouldn't have left the EU", colour: 'blue',stimulus2: 'BD24',  correct_response: 1,button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
];

    var brexit_nondesc_false_rightwrong_stimuli = brexit_nondesc_false_stimuli.concat(rightwrong2stimuli)

    var brexit_nondesc_false_procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: brexit_nondesc_false_stimuli,
      repetitions: 2,
      randomize_order: true,
      data: {block:'BNFintro'} 
    };



    var brexit_nondesc_false_block40procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: brexit_nondesc_false_rightwrong_stimuli,
      repetitions: 1,
      randomize_order: true,
      data: {block:'BNF'} 
    };

var immigration_nondesc_false_stimuli = [
  {stimulus: "Immigrant numbers should rise", colour:"blue", stimulus2: 'IN1', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "Immigrant numbers should increase", colour:"blue", stimulus2: 'IN2', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "Immigrant numbers should get higher", colour:"blue", stimulus2: 'IN3', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "The immigrant population should climb", colour:"blue", stimulus2: 'IN4', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "The immigrant population should expand",  colour:"blue",stimulus2: 'IN5', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "Immigrant numbers shouldnât go down", colour:"blue", stimulus2: 'IN6', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "Immigrant numbers shouldnât decrease", colour:"blue", stimulus2: 'IN7', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "Immigrant numbers shouldnât get lower",  colour:"blue",stimulus2: 'IN8', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "The immigrant population shouldnât shrink", colour:"blue", stimulus2: 'IN9', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "The immigrant population shouldn't get smaller", colour:"blue", stimulus2: 'IN10', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>'},
  {stimulus: "Immigrant numbers should go down", stimulus2: 'IN11', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "Immigrant numbers should decrease", stimulus2: 'IN12', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "Immigrant numbers should get lower", stimulus2: 'IN13', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "The immigrant population should shrink", stimulus2: 'IN14', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "The immigrant population should get smaller", stimulus2: 'IN15', correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "Immigrant numbers shouldnât rise", stimulus2: 'IN16', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "Immigrant numbers shouldnât increase", stimulus2: 'IN17', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "Immigrant numbers shouldnât get higher", stimulus2: 'IN18', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "The immigrant population shouldn't climb", stimulus2: 'IN19', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  {stimulus: "The immigrant population shouldn't expand", stimulus2: 'IN20', colour:"blue", correct_response: 0, button: ['TRUE'], html: '<button id="btn-true" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 25%; top: 15%">TRUE</button>'},
  { stimulus: "The incubator population shouldn't climb",colour:"blue",  stimulus2: 'IN23', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' },
  { stimulus: "Irrigator numbers should go down",colour:"blue",  stimulus2: 'IN24', correct_response: 1, button: ['FALSE'], html: '<button id="btn-false" class="jspsych-btn top-buttons" style = "font-size: 30px; position:fixed; left: 75%; top: 15%">FALSE</button>' }
];


    var immigration_nondesc_false_rightwrong_stimuli = immigration_nondesc_false_stimuli.concat(rightwrong2stimuli)

var immigration_nondesc_false_procedure = {
    timeline: [start_button, fixation, test1],
    timeline_variables: immigration_nondesc_false_stimuli,
    repetitions: 2,
    randomize_order: true,
    data: {block:'INFintro'} 
};

var immigration_nondesc_false_block40procedure  = {
      timeline: [start_button, fixation, test1],
      timeline_variables: immigration_nondesc_false_rightwrong_stimuli,
      repetitions: 1,
      randomize_order: true,
      data: {block:'INF'} 
    };




var rulechange = {
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p>Great.<br> In the next block, the rule is going to change.</p>`,
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
    on_finish: function(){
        document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
                    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
    },
    data: {screen:'rulechange'} 
};




var conditionchange = {
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){return `<p>Great.<br> In the next block, the rule <strong>and</strong> the statements are going to change.</p><br>
    <p> If you need a break, <strong>take one now</strong>.<br> Please ensure you have recorded your ID (<strong>${jspsych_id}</strong>)
        as you may need this to resume the experiment.<br>
        As a reminder, if you would like to withdraw your data at any point, this may be requested via an email: ss2651@sussex.ac.uk.`},
    on_start: function(){
        // block2code = (`${theme[0]}${condition2[0]}${rule2[0]}`).toUpperCase();
        let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar),
        document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
        data: {screen:'conditionchange'},
        on_finish: function(){
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);},
    choices: ['Continue'],
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
};

var B_NtDconditionchange = {
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){return `<p>Great.
      <br> In the next block, the statements and rule are going to change.</p>
    <p>Instead of being about whether the UK <em>should have left</em> the EU,</p>
    <p>the statements are going to be about whether the UK <em>has left</em> the EU.</p>
    <p>That is, they will state either that the UK has left the EU, or that it is still in the EU</p>
    <br><br>

      <p> If you need a short break, take one now. You may leave fullscreen mode if you need to.</p><br>
    <p>Please ensure you have recorded your ID (<strong>${jspsych_id}</strong>)
    as you may need this to resume the experiment</p>
    `},
    on_start: function(){
        block2code = (`${theme[0]}${condition2[0]}${rule2[0]}`).toUpperCase();
        let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar),
        document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
        on_finish: function(){
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);},
    choices: ['Continue'],
    data: {screen:'B_NtD_conditionchange'},
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
};

var B_DtNconditionchange = {
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){return `<p>Great.<br> In the next block, the statements and rule are going to change.</p>
    <p<br>>Instead of being about whether the UK <em>did</em> leave the EU,</p>
    <p>the statements are going to be about if the UK <em>should have</em> left the EU.</p>
    <p>That is, they will express an opinion about the UK leaving the EU</p>
        <br><br>
    <p> If you need a short break, take one now. You may leave fullscreen mode if you need to.</p><br>
    <p>Please ensure you have recorded your ID (<strong>${jspsych_id}</strong>)
    as you may need this to resume the experiment</p>
        <p>Your data so far has been saved; as a reminder, if you would like to withdraw your data at any point, this may be requested via an email: ss2651@sussex.ac.uk.</p>
`},
    on_start: function(){
        block2code = (`${theme[0]}${condition2[0]}${rule2[0]}`).toUpperCase();
        let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar),
        document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
        on_finish: function(){
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);},
    choices: ['Continue'],
    data: {screen:'B_DtN_conditionchange'},
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
};

var I_DtNconditionchange = {
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){return `<p>Great.<br> In the next block, the statements and rule are going to change.</p>
    <p><br>Instead of being about whether immigrant numbers <em>are</em> changing,</p>
    <p>the statements are going to be about if immigrant numbers <em>should be</em> changing.</p>
    <p>That is, they will express an opinion about immigrant numbers increasing </p>
        <br><br>
    <p> If you need a short break, take one now. You may leave fullscreen mode if you need to.</p><br>
    <p>Please ensure you have recorded your ID (<strong>${jspsych_id}</strong>)
    as you may need this to resume the experiment</p>
        <p>Your data so far has been saved; as a reminder, if you would like to withdraw your data at any point, this may be requested via an email: ss2651@sussex.ac.uk.</p>
`},
    on_start: function(){
        block2code = (`${theme[0]}${condition2[0]}${rule2[0]}`).toUpperCase();
        let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar),
        document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
        on_finish: function(){
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);},
    choices: ['Continue'],
    data: {screen:'I_DtN_conditionchange'},
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
};

var I_NtDconditionchange = {
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){return `<p>Great.<br> In the next block, the statements and rule are going to change.</p>
    <p>Instead of being about whether immigrant numbers <em>should be </em>changing,</p>
    <p>the statements are going to be about whether immigrant numbers <em>are</em> changing.</p>
    <p>That is, they will state either that immigrant numbers are increasing or decreasingU</p>
    <br><br>
    <p> If you need a short break, take one now. You may leave fullscreen mode if you need to.</p><br>
    <p>Please ensure you have recorded your ID (<strong>${jspsych_id}</strong>)
    as you may need this to resume the experiment
        <p>Your data so far has been saved; as a reminder, if you would like to withdraw your data at any point, this may be requested via an email: ss2651@sussex.ac.uk.</p>
</p>
    `},
    on_start: function(){
        block2code = (`${theme[0]}${condition2[0]}${rule2[0]}`).toUpperCase();
        let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar),
        document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')},
        on_finish: function(){
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);},
    choices: ['Continue'],
    data: {screen:'I_NtD_conditionchange'},
    button_html: '<button id="btn-instructions1" button class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
};

//end of experiment

var experimentover ={
    type: jsPsychHtmlButtonResponse,
    stimulus: `<p> Great.</p>
<p>Please press 'Continue'`,
    choices: [''],
    button_html: '<button id="btn-expover" class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')
  },    
  data: {screen:'experimentover'},
  on_finish: function() {
    document.getElementById('bottom-bar')?.remove();
    document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
}};


var endtrialfun = function(){
    let button = document.getElementById('jspsych-survey-likert-next');
    button.removeEventListener('click',endtrialfun);
    document.removeEventListener('click',checkbuttonfun);
    jsPsych.finishTrial()
};


var checkbuttonfun = function(){
    let form = document.getElementById('jspsych-survey-likert-form');
    const questions = form.querySelectorAll('.jspsych-survey-likert-opts');
    let allAnswered = false;
    let answeredqs = 0
    questions.forEach((q) => {
      const radios = q.querySelectorAll('input[type="radio"]');
      radios.forEach((r) => {if (r.checked===true){answeredqs++}})
      });
      if (answeredqs===16) {allAnswered=true};
      if (allAnswered===true) {
        button = document.getElementById('jspsych-survey-likert-next')
        button.disabled=false};
};

var likert_scale = [
  "Strongly Disagree", 
  "", 
  "", 
  "", 
  "",
  "",
  "Strongly Agree"
];

var BIDR = {
  type: jsPsychSurveyLikert,
  questions: [
    {prompt: "I have not always been honest with myself.", name: 'BIDR1', labels: likert_scale},
    {prompt: "I always know why I like things", name: 'BIDR2', labels: likert_scale},
    {prompt: "It's hard for me to shut off a disturbing thought.", name: 'BIDR3', labels: likert_scale},
    {prompt: "I never regret my decisions", name: 'BIDR4', labels: likert_scale},
    {prompt: "I sometimes lose out on things because I can't make up my mind soon enough", name: 'BIDR5', labels: likert_scale},
    {prompt: "I am a completely rational person", name: 'BIDR6', labels: likert_scale},
    {prompt: "I am very confident of my judgements", name: 'BIDR7', labels: likert_scale},
    {prompt: "I have sometimes doubted my ability as a lover", name: 'BIDR8', labels: likert_scale},
    {prompt: "I sometimes tell lies if I have to", name: 'BIDR9', labels: likert_scale},
    {prompt: "I never cover up my mistakes", name: 'BIDR10', labels: likert_scale},
    {prompt: "There have been occasions when I have taken advantage of someone", name: 'BIDR11', labels: likert_scale},
    {prompt: "I sometimes try to get even rather than forgive and forget", name: 'BIDR12', labels: likert_scale},
    {prompt: "I have said something bad about a friend behind his/her back", name: 'BIDR13', labels: likert_scale},
    {prompt: "When I hear people talking privately, I avoid listening", name: 'BIDR14', labels: likert_scale},
    {prompt: "I never take things that don't belong to me", name: 'BIDR15', labels: likert_scale},
    {prompt: "I don't gossip about other people's business", name: 'BIDR16', labels: likert_scale},
  ],
  preamble: `<div style="position: fixed; top: 5%; left: 50%; margin-bottom:5%;transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 16px;"
        <p><b>Survey 4/4</b></p></div>
        <div style="position: fixed; top: 7.5%; left: 50%; transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 12px;"
        <p>This part of the questionnaire presents a number of characteristics that may or may not describe you. Please select the answer that best indicates the extent to which you agree or disagree with the
statement. Be as honest as possible, but rely on your initial feelings and do not think too much.</p></div>
        <div style="overflow-y:auto; position:fixed; top: 18%; left: 50%; transform: translateX(-50%); height: 66%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 20px; padding-bottom:20px;font-size: 12px; line-height: 1.6em"> 
            <div style="width: 400px; margin: auto; text-align: center; align-items: center">`, 
    on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);
  },
  on_load: function(){
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar-and-button')
    let form = document.getElementById('jspsych-survey-likert-form');
    let button = document.getElementById('jspsych-survey-likert-next');
    let bar = document.getElementById('bottom-bar');
    if (button && bar) {bar.appendChild(button)};
    button.addEventListener('click',endtrialfun);
    button.disabled = true;
    document.addEventListener('click',checkbuttonfun);
    button.style.fontWeight='bold';
  },
  on_finish: function(data){
    document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar-and-button');
    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            let form = document.getElementById('jspsych-survey-likert-form');
            const questions = form.querySelectorAll('.jspsych-survey-likert-opts');
            var itemorder = [];
            var responses = [];
            var responses2 = [];
            var Likertresponse = [];
            questions.forEach((q) => {
                var BIDRitem = q.getAttribute('data-name');
                var itemresponse = 0
                itemorder.push(BIDRitem);
                var radios = q.querySelectorAll('input[type="radio"]');
                radios.forEach((r) => {
                    if (r.checked){Likertresponse.push(r.value); itemresponse=r.valueAsNumber}
                });
                responses[BIDRitem]=itemresponse;
                responses2.push({item:BIDRitem,score:itemresponse})
            });
            order = [];
            itemorder.forEach((i) =>{
                var item = i.substring(4);
                order.push(item)
            });
                data.order = order;
                data.Likertresponse = Likertresponse;
                data.screen = 'BIDR';
                data.response=responses;
                data.response2=responses2
  },
  randomize_question_order: true,
};







var BEM1order = [];
var BEM2order = [];
var BEM3order = [];
var BEM4order = [];
var IEM1order = [];
var IEM2order = [];
var IEM3order = [];
var IEM4order = [];

var sliderendtrialfun = function(){
    let button = document.getElementById('jspsych-multiple-slider-next');
    button.removeEventListener('click',endtrialfun);
    document.removeEventListener('click',checkbuttonfun);
    jsPsych.finishTrial()
};




var BrexitExplicitMeasures1 = {
        type: jsPsychMultipleSlider,
        questions: BrexitExplicitMeasures1_ItemsX,
        randomize_question_order: true,
        preamble: `<div style="position: fixed; top: 5%; left: 50%; margin-bottom:5%;transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 16px;"
        <p><b>Survey 2/4</b></p></div>
        <div style="position: fixed; top: 7.5%; left: 50%; transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 12px;"
        <p>Please be as honest as possible, but rely on your initial feelings and do not think too much.</p></div>
        <div style="overflow-y:auto; overflow-x:hidden; position:fixed; top: 18%; left: 50%; transform: translateX(-50%); height: 66%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 20px; padding-bottom:20px;font-size: 12px; line-height: 1.6em"> 
            <div style="width: 400px; margin: auto; text-align: center; align-items: center">`, 
        require_movement: true,
        slider_width: 400,
        data: {
            screen: "BrexitExplicitMeasures1",
        },
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);
  },
  on_load: function(){
    let form = document.getElementById('jspsych-multiple-slider-form');
    form.style.position = 'fixed';
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar-and-button');
    let button = document.getElementById('jspsych-multiple-slider-next');
    let bar = document.getElementById('bottom-bar');
    if (button && bar) {bar.appendChild(button)};
    button.addEventListener('click',sliderendtrialfun);
    button.disabled = true;
    button.style.fontWeight='bold';
    button.style.bottom='1%';
    let sliderStatuses = {};
let sliderIDs = [];
var TheSliders = form.querySelectorAll('.jspsych-slider');
TheSliders.forEach(s => {
  let sliderID = s.getAttribute('id');
  sliderIDs.push(sliderID);
});
sliderIDs.forEach(id => {
  sliderStatuses[id] = false; 
  document.getElementById(id).addEventListener('click', () => {
    sliderStatuses[id] = true;
    const allMoved = Object.values(sliderStatuses).every(moved => moved);
    if (allMoved) {button.disabled=false}
  });
});
  },
  on_finish: function(data){
    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar-and-button');
            let form = document.getElementById('jspsych-multiple-slider-form');
            const questions = form.querySelectorAll('input[type="range"]');
            order = [];
            var responses = {};
            var responses2 = [];
            questions.forEach((q) => {
                var BEMitem = q.getAttribute('data-name');
                order.push(BEMitem);
                var BEMscore = q.valueAsNumber
                responses[BEMitem] = BEMscore
                responses2.push({item: BEMitem, score: BEMscore})
                });
                data.screen = 'BrexitEMs1'
                data.response = responses
                data.responses2 = responses2
            }
        
  };


  var BrexitExplicitMeasures3 = {
        type: jsPsychMultipleSlider,
        questions: BrexitExplicitMeasures3_ItemsX,
        randomize_question_order: true,
        preamble: `<div style="position: fixed; top: 5%; left: 50%; margin-bottom:5%;transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 16px;"
        <p><b> Survey 2/3</b></p></div>
        <div style="position: fixed; top: 7.5%; left: 50%; transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 12px;"
        <p>Please be as honest as possible, but rely on your initial feelings and do not think too much.</p></div>
        <div style="overflow-y:auto; overflow-x:hidden; position:fixed; top: 18%; left: 50%; transform: translateX(-50%); height: 66%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 20px; padding-bottom:20px;font-size: 12px; line-height: 1.6em"> 
            <div style="width: 400px; margin: auto; text-align: center; align-items: center">`, 
        require_movement: true,
        slider_width: 400,
        data: {
            screen: "BrexitExplicitMeasures3",
        },
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);
  },
  on_load: function(){
    console.log('new bem1 running')
    let form = document.getElementById('jspsych-multiple-slider-form');
    form.style.position = 'fixed';
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar-and-button');
    let button = document.getElementById('jspsych-multiple-slider-next');
    let bar = document.getElementById('bottom-bar');
    if (button && bar) {bar.appendChild(button)};
    button.addEventListener('click',sliderendtrialfun);
    button.disabled = true;
    button.style.fontWeight='bold';
    button.style.bottom='1%';
    let sliderStatuses = {};
let sliderIDs = [];
var TheSliders = form.querySelectorAll('.jspsych-slider');
TheSliders.forEach(s => {
  let sliderID = s.getAttribute('id');
  sliderIDs.push(sliderID);
});
sliderIDs.forEach(id => {
  sliderStatuses[id] = false; 
  document.getElementById(id).addEventListener('click', () => {
    sliderStatuses[id] = true;
    const allMoved = Object.values(sliderStatuses).every(moved => moved);
    if (allMoved) {button.disabled=false}
  });
});
  },
  on_finish: function(data){
    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar-and-button');
            let form = document.getElementById('jspsych-multiple-slider-form');
            const questions = form.querySelectorAll('input[type="range"]');
            order = [];
            var responses = {};
            var responses2 = [];
            questions.forEach((q) => {
                var BEMitem = q.getAttribute('data-name');
                order.push(BEMitem);
                var BEMscore = q.valueAsNumber
                responses[BEMitem] = BEMscore
                responses2.push({item: BEMitem, score: BEMscore})
                });
                data.response = responses
                data.responses2 = responses2
            }
        
  };




  var ImmigrationExplicitMeasures1 = {
        type: jsPsychMultipleSlider,
        questions: ImmigrationExplicitMeasures1_ItemsX,
        randomize_question_order: true,
        preamble: `<div style="position: fixed; top: 5%; left: 50%; margin-bottom:5%;transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 16px;"
        <p><b> Survey 2/4</b></p></div>
        <div style="position: fixed; top: 7.5%; left: 50%; transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 12px;"
        <p>Please be as honest as possible, but rely on your initial feelings and do not think too much.</p></div>
        <div style="overflow-y:auto; overflow-x:hidden; position:fixed; top: 18%; left: 50%; transform: translateX(-50%); height: 66%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 20px; padding-bottom:20px;font-size: 12px; line-height: 1.6em"> 
            <div style="width: 400px; margin: auto; text-align: center; align-items: center">`, 
        require_movement: true,
        slider_width: 400,
        data: {
            screen: "ImmigrationExplicitMeasures1",
        },
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);
  },
  on_load: function(){
    let form = document.getElementById('jspsych-multiple-slider-form');
    form.style.position = 'fixed';
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar-and-button');
    let button = document.getElementById('jspsych-multiple-slider-next');
    let bar = document.getElementById('bottom-bar');
    if (button && bar) {bar.appendChild(button)};
    button.addEventListener('click',sliderendtrialfun);
    button.disabled = true;
    button.style.fontWeight='bold';
    button.style.bottom='1%';
    let sliderStatuses = {};
let sliderIDs = [];
var TheSliders = form.querySelectorAll('.jspsych-slider');
TheSliders.forEach(s => {
  let sliderID = s.getAttribute('id');
  sliderIDs.push(sliderID);
});
sliderIDs.forEach(id => {
  sliderStatuses[id] = false; 
  document.getElementById(id).addEventListener('click', () => {
    sliderStatuses[id] = true;
    const allMoved = Object.values(sliderStatuses).every(moved => moved);
    if (allMoved) {button.disabled=false}
  });
});
  },
  on_finish: function(data){
    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar-and-button');
            let form = document.getElementById('jspsych-multiple-slider-form');
            const questions = form.querySelectorAll('input[type="range"]');
            order = [];
            var responses = {};
            var responses2 = [];
            questions.forEach((q) => {
                var IEMitem = q.getAttribute('data-name');
                order.push(IEMitem);
                var IEMscore = q.valueAsNumber
                responses[IEMitem] = IEMscore
                responses2.push({item: IEMitem, score: IEMscore})
                });
                data.screen = 'ImmigrationEMs1'
                data.response = responses
                data.responses2 = responses2
            }
        
  };



  var ImmigrationExplicitMeasures3 = {
        type: jsPsychMultipleSlider,
        questions: ImmigrationExplicitMeasures3_ItemsX,
        randomize_question_order: true,
        preamble: `<div style="position: fixed; top: 5%; left: 50%; margin-bottom:5%;transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 16px;"
        <p><b>Survey 2/4</b></p></div>
        <div style="position: fixed; top: 7.5%; left: 50%; transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 12px;"
        <p>Please be as honest as possible, but rely on your initial feelings and do not think too much.</p></div>
        <div style="overflow-y:auto; overflow-x:hidden; position:fixed; top: 18%; left: 50%; transform: translateX(-50%); height: 66%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 20px; padding-bottom:20px;font-size: 12px; line-height: 1.6em"> 
            <div style="width: 400px; margin: auto; text-align: center; align-items: center">`, 
        require_movement: true,
        slider_width: 400,
        data: {
            screen: "ImmigrationExplicitMeasures3",
        },
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);
  },
  on_load: function(){
    let form = document.getElementById('jspsych-multiple-slider-form');
    form.style.position = 'fixed';
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar-and-button');
    let button = document.getElementById('jspsych-multiple-slider-next');
    let bar = document.getElementById('bottom-bar');
    if (button && bar) {bar.appendChild(button)};
    button.addEventListener('click',sliderendtrialfun);
    button.disabled = true;
    button.style.fontWeight='bold';
    button.style.bottom='1%';
    let sliderStatuses = {};
let sliderIDs = [];
var TheSliders = form.querySelectorAll('.jspsych-slider');
TheSliders.forEach(s => {
  let sliderID = s.getAttribute('id');
  sliderIDs.push(sliderID);
});
sliderIDs.forEach(id => {
  sliderStatuses[id] = false; 
  document.getElementById(id).addEventListener('click', () => {
    sliderStatuses[id] = true;
    const allMoved = Object.values(sliderStatuses).every(moved => moved);
    if (allMoved) {button.disabled=false}
  });
});
  },
  on_finish: function(data){
    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar-and-button');
            let form = document.getElementById('jspsych-multiple-slider-form');
            const questions = form.querySelectorAll('input[type="range"]');
            order = [];
            var responses = {};
            var responses2 = [];
            questions.forEach((q) => {
                var IEMitem = q.getAttribute('data-name');
                order.push(IEMitem);
                var IEMscore = q.valueAsNumber
                responses[IEMitem] = IEMscore
                responses2.push({item: IEMitem, score: IEMscore})
                });
                data.response = responses
                data.responses2 = responses2
            }
        
  };

  GE23scale = ['<span style="font-size: 12px"><em>None</em></span>', '<span style="font-size: 12px"><em>30 minutes</em></span>','<span style="font-size: 12px"><em>1 hour</em></span>','<span style="font-size: 12px"><em>1.5 hours</em></span>','<span style="font-size: 12px"><em>2+hours</em></span>']
GE24scale = ['<span style="font-size: 12px"><em>0%</em></span>', '<span style="font-size: 12px"><em>25%</em></span>','<span style="font-size: 12px"><em>50%</em></span>','<span style="font-size: 12px"><em>75%</em></span>','<span style="font-size: 12px"><em>100%</em></span>']
GE25scale = ['<span style="font-size: 12px"><em>Very Left-Wing</em></span>', '<span style="font-size: 12px"><em>Moderately<br>Left-Wing<br></em></span>','<span style="font-size: 12px"><em>Centrist</em></span>','<span style="font-size: 12px"><em>Moderately<br>Right-Wing<br></em></span>','<span style="font-size: 12px"><em>Very Right-Wing</em></span>']


        var BrexitExplicitMeasures5_Stimuli = [
        {stimulus: "I used to be more pro-Brexit than I am now", name: 'BE6'},
{stimulus: "I used to be more anti-Brexit than I am now", name: 'BE7'},
{stimulus: "My political views have changed a lot in the past 5 years", name: 'GE8'},
{stimulus: 'In general, I am strongly opinionated', name: 'GE9'},
{stimulus: 'Regarding politics, I am strongly opinionated', name: 'GE10'},
{stimulus: 'I have strong opinions about the UK leaving the EU', name: 'BE11'},
{stimulus: "People's political beliefs should be judged", name: 'GE12'},
{stimulus: "People's views on the UK leaving the EU should be judged", name: 'BE13'},
{stimulus: "I judge people's views on the UK leaving the EU", name: 'BE14'},
{stimulus: "People shouldn't be outspoken about thinking the UK should have left the EU", name: 'BE15'},
{stimulus: "People shouldn't be outspoken about thinking the UK should have remained in the EU", name: 'BE16'},
{stimulus: 'People judge the political beliefs of others a lot', name: 'GE17'},
{stimulus: 'People judge the views of others about the UK leaving the EU a lot', name: 'BE18'},
{stimulus: 'People judge you for thinking the UK should have left the EU', name: 'BE19'},
{stimulus: "People judge you for thinking the UK should have remained in the EU", name: 'BE20'},
{stimulus: 'I have felt judged about my opinions on the UK leaving the EU', name: 'BE21'},
{stimulus: 'I refrain from sharing my opinions on the UK leaving the EU to avoid judgement or discomfort', name: 'BE22'},
{stimulus: 'Please select âStrongly Agreeâ for this question', name: 'SA1'},
{stimulus: 'Please select âStrongly Disagreeâ for this question', name:'SD1'},
];

    var BrexitExplicitMeasures5_Items = [
    {prompt:'How much political content (e.g. news articles/programmes, content on social media) do you consume per day?', name: 'GE23', ticks: GE23scale, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  },
{prompt:'What proportion of the political content (e.g. news articles/programmes, content on social media) you consume do you disagree with?', name: 'GE24', ticks: GE24scale, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  },
{prompt:'How would you describe your political views on economic issues?', name: 'GE25', ticks: GE25scale, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  },
{prompt:'How would you describe your political views on social issues?', name: 'GE26', ticks: GE25scale, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  }
    ];
    for (const item of BrexitExplicitMeasures5_Stimuli) {
        BrexitExplicitMeasures5_Items.push({
            prompt: `<div style="margin-bottom: 1px; margin-top: 12px; font-size: 12px; ">${item.stimulus}</div>`,
            name: item.name,
            ticks: scale1,
            required: true,
            min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5
        })
    }


    var BrexitExplicitMeasures5 = {
        type: jsPsychMultipleSlider,
        questions: BrexitExplicitMeasures5_Items,
        randomize_question_order: true,
        preamble: `<div style="position: fixed; top: 5%; left: 50%; margin-bottom:5%;transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 16px;"
        <p><b> Ending Survey</b></p></div>
        <div style="position: fixed; top: 7.5%; left: 50%; transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 12px;"
        <p>Please be as honest as possible, but rely on your initial feelings and do not think too much.</p></div>
        <div style="overflow-y:auto; overflow-x:hidden; position:fixed; top: 18%; left: 50%; transform: translateX(-50%); height: 66%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 20px; padding-bottom:20px;font-size: 12px; line-height: 1.6em"> 
            <div style="width: 400px; margin: auto; text-align: center; align-items: center">`, 
        require_movement: true,
        slider_width: 400,
        data: {
            screen: "BrexitExplicitMeasures5",
        },
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);
  },
  on_load: function(){
    console.log('new bem1 running')
    let form = document.getElementById('jspsych-multiple-slider-form');
    form.style.position = 'fixed';
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar-and-button');
    let button = document.getElementById('jspsych-multiple-slider-next');
    let bar = document.getElementById('bottom-bar');
    if (button && bar) {bar.appendChild(button)};
    button.addEventListener('click',sliderendtrialfun);
    button.disabled = true;
    button.style.fontWeight='bold';
    button.style.bottom='1%';
    let sliderStatuses = {};
let sliderIDs = [];
var TheSliders = form.querySelectorAll('.jspsych-slider');
TheSliders.forEach(s => {
  let sliderID = s.getAttribute('id');
  sliderIDs.push(sliderID);
  let statements = document.querySelectorAll('.jspsych-multiple-slider-statement');
  statements.forEach(st => {
    st.style.marginTop="20px"
  })
});
sliderIDs.forEach(id => {
  sliderStatuses[id] = false; 
  document.getElementById(id).addEventListener('click', () => {
    sliderStatuses[id] = true;
    const allMoved = Object.values(sliderStatuses).every(moved => moved);
    if (allMoved) {button.disabled=false}
  });
});
  },
  on_finish: function(data){
    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar-and-button');
            let form = document.getElementById('jspsych-multiple-slider-form');
            const questions = form.querySelectorAll('input[type="range"]');
            order = [];
            var responses = {};
            var responses2 = [];
            questions.forEach((q) => {
                var BEMitem = q.getAttribute('data-name');
                order.push(BEMitem);
                var BEMscore = q.valueAsNumber
                responses[BEMitem] = BEMscore
                responses2.push({item: BEMitem, score: BEMscore})
                });
                data.response = responses
                data.responses2 = responses2
            }
        
  };




var ImmigrationExplicitMeasures5_Stimuli = [
{stimulus: "I used to be more pro-immigration than I am now", name: 'IE6'},
{stimulus: "I used to be more anti-immigration than I am now", name: 'IE7'},
{stimulus: "My political views have changed in the past 5 years", name: 'GE8'},
{stimulus: 'In general, I am strongly opinionated', name: 'GE9'},
{stimulus: 'Regarding politics, I am strongly opinionated', name: 'GE10'},
{stimulus: 'I have strong opinions about immigration', name: 'IE11'},
{stimulus: "People's political beliefs should be judged", name: 'GE12'},
{stimulus: "People's views on immigration should be judged", name: 'IE13'},
{stimulus: "I judge people's views on immigration", name: 'IE14'},
{stimulus: "People shouldn't be outspoken about thinking that immigration should increase", name: 'IE15'},
{stimulus: "People shouldn't be outspoken about thinking that immigration should decrease", name: 'IE16'},
{stimulus: 'People judge the political beliefs of others a lot', name: 'GE17'},
{stimulus: 'People judge the views of others about immigration a lot', name: 'IE18'},
{stimulus: 'People judge you for thinking that immigration should increase', name: 'IE19'},
{stimulus: "People judge you for thinking that immigration should decrease", name: 'IE20'},
{stimulus: 'I have felt judged about my opinions on immigration', name: 'IE21'},
{stimulus: 'I refrain from sharing my opinions on immigration to avoid judgement or discomfort', name: 'IE22'},
{stimulus: 'Please select âStrongly Agreeâ for this question', name: 'SA1'},
{stimulus: 'Please select âStrongly Disagreeâ for this question', name:'SD1'},
];

    var ImmigrationExplicitMeasures5_Items = [
    {prompt:'How much political content (e.g. news articles/programmes, social media posts/channels) do you consume per day?', name: 'GE23', ticks: GE23scale, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  },
{prompt:'What proportion of the political content (e.g. news articles/programmes, social media posts/channels) you consume do you disagree with?', name: 'GE24', ticks: GE24scale, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  },
{prompt:'How would you describe your political views on economic issues?', name: 'GE25', ticks: GE25scale, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  },
{prompt:'How would you describe your political views on social issues?', name: 'GE26', ticks: GE25scale, required:true,  min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5  },
    ];
    for (const item of ImmigrationExplicitMeasures5_Stimuli) {
        ImmigrationExplicitMeasures5_Items.push({
            prompt: `<div style="margin-bottom: 1px; margin-top: 12px; font-size: 12px; ">${item.stimulus}</div>`,
            name: item.name,
            ticks: scale1,
            required: true,
            min: 0,
            max: 1,
            step: 0.01,
            slider_start: 0.5
        })
    }


    var ImmigrationExplicitMeasures5 = {
        type: jsPsychMultipleSlider,
        questions: ImmigrationExplicitMeasures5_Items,
        randomize_question_order: true,
        preamble: `<div style="position: fixed; top: 5%; left: 50%; margin-bottom:5%;transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 16px;"
        <p><b>Survey 3/4</b></p></div>
        <div style="position: fixed; top: 7.5%; left: 50%; transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 12px;"
        <p>Please be as honest as possible, but rely on your initial feelings and do not think too much.</p></div>
        <div style="overflow-y:auto; overflow-x:hidden; position:fixed; top: 18%; left: 50%; transform: translateX(-50%); height: 66%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 20px; padding-bottom:20px;font-size: 12px; line-height: 1.6em"> 
            <div style="width: 400px; margin: auto; text-align: center; align-items: center">`, 
        require_movement: true,
        slider_width: 400,
        data: {
            screen: "ImmigrationExplicitMeasures5",
        },
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);
  },
  on_load: function(){
    let form = document.getElementById('jspsych-multiple-slider-form');
    form.style.position = 'fixed';
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar-and-button');
    let button = document.getElementById('jspsych-multiple-slider-next');
    let bar = document.getElementById('bottom-bar');
    if (button && bar) {bar.appendChild(button)};
    button.addEventListener('click',sliderendtrialfun);
    button.disabled = true;
    button.style.fontWeight='bold';
    button.style.bottom='1%';
    let sliderStatuses = {};
let sliderIDs = [];
var TheSliders = form.querySelectorAll('.jspsych-slider');
TheSliders.forEach(s => {
  let sliderID = s.getAttribute('id');
  sliderIDs.push(sliderID);
});
sliderIDs.forEach(id => {
  sliderStatuses[id] = false; 
  document.getElementById(id).addEventListener('click', () => {
    sliderStatuses[id] = true;
    const allMoved = Object.values(sliderStatuses).every(moved => moved);
    if (allMoved) {button.disabled=false}
  });
});
  },
  on_finish: function(data){
    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar-and-button');
            let form = document.getElementById('jspsych-multiple-slider-form');
            const questions = form.querySelectorAll('input[type="range"]');
            order = [];
            var responses = {};
            var responses2 = [];
            questions.forEach((q) => {
                var IEMitem = q.getAttribute('data-name');
                order.push(IEMitem);
                var IEMscore = q.valueAsNumber
                responses[IEMitem] = BEMscore
                responses2.push({item: IEMitem, score: IEMscore})
                });
                data.response = responses
                data.responses2 = responses2
            }
        
  };

    var ImmigrationExplicitMeasures5 = {
        type: jsPsychMultipleSlider,
        questions: ImmigrationExplicitMeasures5_Items,
        randomize_question_order: true,
        preamble: `<div style="position: fixed; top: 5%; left: 50%; margin-bottom:5%;transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 16px;"
        <p><b> Survey 3/4</b></p></div>
        <div style="position: fixed; top: 7.5%; left: 50%; transform: translateX(-50%); height: 10%; text-align: center; width: 600px;font-size: 12px;"
        <p>Please be as honest as possible, but rely on your initial feelings and do not think too much.</p></div>
        <div style="overflow-y:auto; overflow-x:hidden; position:fixed; top: 18%; left: 50%; transform: translateX(-50%); height: 66%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 20px; padding-bottom:20px;font-size: 12px; line-height: 1.6em"> 
            <div style="width: 400px; margin: auto; text-align: center; align-items: center">`, 
        require_movement: true,
        slider_width: 400,
        data: {
            screen: "ImmigrationExplicitMeasures5",
        },
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);
  },
  on_load: function(){
    let form = document.getElementById('jspsych-multiple-slider-form');
    form.style.position = 'fixed';
    document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar-and-button');
    let button = document.getElementById('jspsych-multiple-slider-next');
    let bar = document.getElementById('bottom-bar');
    if (button && bar) {bar.appendChild(button)};
    button.addEventListener('click',sliderendtrialfun);
    button.disabled = true;
    button.style.fontWeight='bold';
    button.style.bottom='1%';
    let sliderStatuses = {};
let sliderIDs = [];
var TheSliders = form.querySelectorAll('.jspsych-slider');
TheSliders.forEach(s => {
  let sliderID = s.getAttribute('id');
  sliderIDs.push(sliderID);
});
sliderIDs.forEach(id => {
  sliderStatuses[id] = false; 
  document.getElementById(id).addEventListener('click', () => {
    sliderStatuses[id] = true;
    const allMoved = Object.values(sliderStatuses).every(moved => moved);
    if (allMoved) {button.disabled=false}
  });
});
  },
  on_finish: function(data){
    let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar-and-button');
            let form = document.getElementById('jspsych-multiple-slider-form');
            const questions = form.querySelectorAll('input[type="range"]');
            order = [];
            var responses = {};
            var responses2 = [];
            questions.forEach((q) => {
                var IEMitem = q.getAttribute('data-name');
                order.push(IEMitem);
                var IEMscore = q.valueAsNumber
                responses[IEMitem] = IEMscore
                responses2.push({item: IEMitem, score: IEMscore})
                });
                data.response = responses
                data.responses2 = responses2
            }
        
  };



  const filenamewhole = function(){
  return `${jspsych_id}-${formatted_date}-O.csv`
}

var pipe = {
  type: jsPsychPipe,
    action: "save",
    experiment_id: "0JyZ279W9U6y",
    filename: filenamewhole,
    data_string: () => jsPsych.data.get().csv(),
    on_finish: function () {
        finished_experiment = true
     }
}

    var exclusionform = {
        type: jsPsychSurveyHtmlForm,
    //     preamble: `<div style="font-size: 12px;">
    //   <h1 style="text-align: center;">Exclusion</h1>
    // </div>`,
        html: `<div style="height:100%;width="100%">
                    <div style="position:fixed; top: 30%; left: 50%; transform: translateX(-50%); height:20%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 0.1%; padding-bottom:20px;font-size: 12px; line-height: 1.11em"> 


    <div style="width: 400px; margin: auto; text-align: center; align-items: center">
      
      <p>If there is any reason why your data shouldn't be included, or if you had any technical difficulties, please explain in the box below.</p>
            <p>Otherwise, press 'Continue'.</p>
      <div style="width:100%; align-items: center">  <textarea name="exclusion" style="width: 100%; height: 100px; resize: vertical;"></textarea></div>
    </div></div>
  `,
  on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);},
button_label: "Continue",
  on_load: function(){document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')
  const content = document.querySelector('.jspsych-content')
            if (content) {
                content.style.marginTop = '5%';
            }
  },
  on_finish: function(data) {
    document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
    const content = document.querySelector('.jspsych-content')
            if (content) {
                content.style.marginTop = 'auto';
            };
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            jsPsych.timeline.insert(pipe);
            jsPsych.timeline.insert(experimentover2)
            jsPsych.timeline.insert(exitfullscreen);
          }

};


const filenameblock2only = function(){
  return `${jspsych_id}-${formatted_date}-B.csv`
}


var pipeblock2only = {
  type: jsPsychPipe,
    action: "save",
    experiment_id: "0JyZ279W9U6y",
    filename: filenameblock2only,
    data_string: () => jsPsych.data.get().csv(),
    on_finish: function () {
        finished_experiment = true
     }
}


var exclusionformblock2only = {
        type: jsPsychSurveyHtmlForm,
    //     preamble: `<div style="font-size: 12px;">
    //   <h1 style="text-align: center;">Exclusion</h1>
    // </div>`,
        html: `<div style="height:100%;width="100%">
                    <div style="position:fixed; top: 30%; left: 50%; transform: translateX(-50%); height:20%; width:40%; text-align: center; border: 1px solid #ccc; padding-left: 75px; padding-right: 75px; padding-top: 0.1%; padding-bottom:20px;font-size: 12px; line-height: 1.11em"> 


    <div style="width: 400px; margin: auto; text-align: center; align-items: center">
      
      <p>If there is any reason why your data shouldn't be included, or if you had any technical difficulties, please explain here:</p>
      <div style="width:100%; align-items: center">  <textarea name="exclusion" style="width: 100%; height: 100px; resize: vertical;"></textarea></div>
    </div></div>
  `,
  on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      bar.style.zIndex = '0';
      document.body.appendChild(bar);},
button_label: "Continue",
  on_load: function(){document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')
  const content = document.querySelector('.jspsych-content')
            if (content) {
                content.style.marginTop = '5%';
            }
  },
  on_finish: function() {
    document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
    const content = document.querySelector('.jspsych-content')
            if (content) {
                content.style.marginTop = 'auto';
            };
            let bar = document.getElementById('bottom-bar');
            document.body.removeChild(bar);
            jsPsych.timeline.insert(pipeblock2only);
            jsPsych.timeline.insert(experimentover_block2only);
            jsPsych.timeline.insert(exitfullscreen);}

};






var experimentover2 ={
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){return `<p> You have now finished. Thank you for your participation.</p>
    <p>As a reminder, your ID is: <strong>${jspsych_id}</strong></p>
    <p> If at any point before 15/08/25 you would like to withdraw your data, this may be requested via an email: ss2651@sussex.ac.uk.</p>
    <p>This email may also be contacted if you have any other concerns or wish to receive the results of the study when they become available.</p>

        <p> If you would like to enter the prize draw to win a Â£25 voucher, please enter your email <a href="https://universityofsussex.eu.qualtrics.com/jfe/form/SV_3XgXJHdhMw6mH6C">on this website</a>

    <p> If you are experiencing distress, please refer to <a href="https://www.nhs.uk/mental-health/feelings-symptoms-behaviours/feelings-and-symptoms/stress/" target="_blank">the NHS webpage here</a> for resources.</p>
    <p> Thank you again for your time.</p>`},
    choices: [''],
    button_html: '<button id="btn-expover" class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
      console.log(jspsych_id)
  },    
  data: {screen:'experimentover'},
  on_finish: function() {
    document.getElementById('bottom-bar')?.remove();
    document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
}};




var experimentover_block2only ={
    type: jsPsychHtmlButtonResponse,
    stimulus: function(){return `<p> You have now finished. Thank you for your participation.</p>
    <p>As a reminder, your ID is: <strong>${jspsych_id}</strong></p>
    <p> If at any point before 15/08/25 you would like to withdraw your data, this may be requested via an email: ss2651@sussex.ac.uk.</p>
    <p>This email may also be contacted if you have any other concerns or wish to receive the results of the study when they become available.</p>

    <p> If you would like to enter the prize draw to win a Â£25 voucher, please enter your email <a href="https://universityofsussex.eu.qualtrics.com/jfe/form/SV_3XgXJHdhMw6mH6C">on this website</a>

    <p> If you are experiencing distress, please refer to <a href="https://www.nhs.uk/mental-health/feelings-symptoms-behaviours/feelings-and-symptoms/stress/" target="_blank">the NHS webpage here</a> for resources.</p>
    <p> Thank you again for your time.</p>`},
    choices: [''],
    button_html: '<button id="btn-expover" class="jspsych-btn" style = "width: 120px; height: 30px; position: fixed; bottom: 0px; justify-content: center; align-items: center;"><strong>Continue</strong></button>',
        on_start: function(){
    let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar);
      document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar');
  },    
  data: {screen:'experimentover'},
  on_finish: function() {
    document.getElementById('bottom-bar')?.remove();
    document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar');
}};


const filenamefirsthalf = function(){
  return `${jspsych_id}-${formatted_date}-A.csv`
}

var pipefirsthalf = {
  type: jsPsychPipe,
    action: "save",
    experiment_id: "0JyZ279W9U6y",
    wait_message: `<p>Saving progress. Please do not close this page.</p>`,
    filename: filenamefirsthalf,
    data_string: () => jsPsych.data.get().csv(),
}


var exitfullscreen = {
        type: jsPsychFullscreen,
        fullscreen_mode: false,
        message: `<div><p>When you press 'Continue', the window will exit full-screen.
            Thank you for taking part!</p>`,
        };


        var welcome = {
      type: jsPsychHtmlButtonResponse,
      stimulus: function(){return `<p style="line-height:2.2em">Thank you; the experiment is displaying correctly.<br>Please ensure you are in a place where you can focus without being interrupted,<br>
         and that you have recorded your participant ID (<strong>${jspsych_id}</strong>)`},
         choices: ['<strong>Continue</strong>'],
         button_html: '<button id="continue-btn" class="jspsych-btn" style="font-weight:bold" <strong>Continue</strong></button>',
         on_start: function(){
            document.querySelector('.jspsych-content-wrapper')?.classList.add('with-bottom-bar')
        let bar = document.createElement('div');
      bar.id = 'bottom-bar';
      document.body.appendChild(bar)},
      on_load:function(){
        console.log('welcome trial starting',calibrationarray);
      },
      on_finish: function(data){
        data.calibration2=calibrationarray;
        console.log('welcome trial finishing');
        let bar = document.getElementById('bottom-bar');
        document.body.removeChild(bar);
            document.querySelector('.jspsych-content-wrapper')?.classList.remove('with-bottom-bar'),
            console.log(jspsych_id,theme,condition1,rule1,rule2,block2code,block2only)
        if (theme === "Brexit" && condition1 === "desc" && rule1 === "true" && rule2 === "false") {
            jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(BIDR);
jsPsych.timeline.insert(BrexitExplicitMeasures1);
jsPsych.timeline.insert(BrexitExplicitMeasures3);
jsPsych.timeline.insert(BrexitExplicitMeasures5);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(B_DtNconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions)
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure)
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure)
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions)
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure)
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure)
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Brexit" && condition1 === "desc" && rule1 === "true" && rule2 === "true"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(BrexitExplicitMeasures1);
    jsPsych.timeline.insert(BrexitExplicitMeasures3);
    jsPsych.timeline.insert(BrexitExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions)
    jsPsych.timeline.insert(brexit_desc_true_block40procedure)
    jsPsych.timeline.insert(brexit_desc_true_block40procedure)
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions)
    jsPsych.timeline.insert(brexit_desc_false_block40procedure)
    jsPsych.timeline.insert(brexit_desc_false_block40procedure)
    jsPsych.timeline.insert(pipefirsthalf)
    jsPsych.timeline.insert(B_DtNconditionchange)
    jsPsych.timeline.insert(fullscreentrial)
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions)
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure)
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure)
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions)
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure)
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure)
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Brexit" && condition1 === "desc" && rule1 === "false" && rule2 === "false"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(B_DtNconditionchange);
    jsPsych.timeline.insert(fullscreentrial)
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Brexit" && condition1 === "desc" && rule1 === "false" && rule2 === "true"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(BrexitExplicitMeasures1);
    jsPsych.timeline.insert(BrexitExplicitMeasures3);
    jsPsych.timeline.insert(BrexitExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(B_DtNconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (block2only===0 && theme === "Brexit" && condition1 === "nondesc" && rule1 === "true" && rule2 === "true"){
    console.log('Brexit full (NT, DT)');
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(BrexitExplicitMeasures1);
    jsPsych.timeline.insert(BrexitExplicitMeasures3);
    jsPsych.timeline.insert(BrexitExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(B_NtDconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Brexit" && condition1 === "nondesc" && rule1 === "false" && rule2 === "false"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(BrexitExplicitMeasures1);
    jsPsych.timeline.insert(BrexitExplicitMeasures3);
    jsPsych.timeline.insert(BrexitExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(B_NtDconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Brexit" && condition1 === "nondesc" && rule1 === "false" && rule2 === "true"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(BrexitExplicitMeasures1);
    jsPsych.timeline.insert(BrexitExplicitMeasures3);
    jsPsych.timeline.insert(BrexitExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(B_NtDconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Brexit" && condition1 === "nondesc" && rule1 === "true" && rule2 === "false") {
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(BrexitExplicitMeasures1);
    jsPsych.timeline.insert(BrexitExplicitMeasures3);
    jsPsych.timeline.insert(BrexitExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(B_NtDconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
 else if (theme === "Immigration" && condition1 === "desc" && rule1 === "true" && rule2 === "false") {
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(ImmigrationExplicitMeasures1);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures3);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(I_DtNconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Immigration" && condition1 === "desc" && rule1 === "true" && rule2 === "true"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(ImmigrationExplicitMeasures1);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures3);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(I_DtNconditionchange)
    jsPsych.timeline.insert(fullscreentrial)
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Immigration" && condition1 === "desc" && rule1 === "false" && rule2 === "false"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(ImmigrationExplicitMeasures1);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures3);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(I_DtNconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Immigration" && condition1 === "desc" && rule1 === "false" && rule2 === "true"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(ImmigrationExplicitMeasures1);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures3);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(I_DtNconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (block2only===0 && theme === "Immigration" && condition1 === "nondesc" && rule1 === "true" && rule2 === "true"){
    console.log('immigration full (NT, DT)');
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(ImmigrationExplicitMeasures1);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures3);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(I_DtNconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Immigration" && condition1 === "nondesc" && rule1 === "false" && rule2 === "false"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(ImmigrationExplicitMeasures1);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures3);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(I_NtDconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Immigration" && condition1 === "nondesc" && rule1 === "false" && rule2 === "true"){
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(ImmigrationExplicitMeasures1);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures3);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(I_NtDconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (theme === "Immigration" && condition1 === "nondesc" && rule1 === "true" && rule2 === "false") {
    jsPsych.timeline.insert(instructions1);
jsPsych.timeline.insert(participant_info2);
jsPsych.timeline.insert(ImmigrationExplicitMeasures1);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures3);
    jsPsych.timeline.insert(ImmigrationExplicitMeasures5);
jsPsych.timeline.insert(BIDR);
            jsPsych.timeline.insert(part1cont);
            jsPsych.timeline.insert(instructions);
            jsPsych.timeline.insert(inducer_procedure);
            jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(pipefirsthalf);
    jsPsych.timeline.insert(I_NtDconditionchange);
    jsPsych.timeline.insert(fullscreentrial);
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionform);
  }
  else if (block2code ==="BNT" && block2only===1) {
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionformblock2only);
  }
  else if (block2code==="BNF" && block2only===1){
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_nondesc_false_instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_nondesc_true_instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40instructions);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(brexit_nondesc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionformblock2only);
  }
  else if (block2code==="BDT" && block2only===1){
    console.log('timeline inserting BDT stuff')
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionformblock2only);
  }
  else if (block2code==="BDF" && block2only===1){
    console.log('timeline inserting BDF stuff')
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(brexit_desc_false_instructions);
    jsPsych.timeline.insert(brexit_desc_false_procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40instructions);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(brexit_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(brexit_desc_true_instructions);
    jsPsych.timeline.insert(brexit_desc_true_procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40instructions);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(brexit_desc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionformblock2only);
  }
  else if (block2code ==="INT" && block2only===1) {
    console.log('timeline inserting INT stuff')
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionformblock2only);
  }
  else if (block2code==="INF" && block2only===1){
    console.log('timeline inserting INF stuff')
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_nondesc_false_instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_nondesc_true_instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40instructions);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(immigration_nondesc_true_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionformblock2only);
  }
  else if (block2code==="IDT" && block2only===1){
    console.log('timeline inserting IDT stuff')
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionformblock2only);
  }
  else if (block2code==="IDF" && block2only===1){
    console.log('timeline inserting IDF stuff')
    jsPsych.timeline.insert(instructions);
    jsPsych.timeline.insert(inducer_procedure);
    jsPsych.timeline.insert(ontorealblocks);
    jsPsych.timeline.insert(immigration_desc_false_instructions);
    jsPsych.timeline.insert(immigration_desc_false_procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40instructions);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(immigration_desc_false_block40procedure);
    jsPsych.timeline.insert(rulechange);
    jsPsych.timeline.insert(immigration_desc_true_instructions);
    jsPsych.timeline.insert(immigration_desc_true_procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40instructions);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
    jsPsych.timeline.insert(immigration_desc_true_block40procedure);
        jsPsych.timeline.insert(experimentover);
    jsPsych.timeline.insert(exclusionformblock2only);
  }
    }
        };



    jsPsych.run(timeline);

  </script>
</html>
